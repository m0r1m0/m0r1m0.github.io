<!DOCTYPE html><html><head><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-N6MC6SMGJM"></script><script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'G-N6MC6SMGJM', {
              page_path: window.location.pathname,
            });
          </script><link rel="alternate" type="application/rss+xml" title="RSS feed" href="/rss.xml"/><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>morimo</title><meta name="next-head-count" content="3"/><link rel="preload" href="/_next/static/css/1e8ccdab538ecc583dd2.css" as="style"/><link rel="stylesheet" href="/_next/static/css/1e8ccdab538ecc583dd2.css" data-n-g=""/><link rel="preload" href="/_next/static/css/a57b204bad78a8456905.css" as="style"/><link rel="stylesheet" href="/_next/static/css/a57b204bad78a8456905.css" data-n-p=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/main-1aebe1c5ebad78b6eefd.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-e067438c4cf4ef2ef178.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.2113c6061a2f456066a1.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.040a3874e38b7cc6b430.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-5874fa266a7d44909009.js" as="script"/><link rel="preload" href="/_next/static/chunks/c5b568cee8545d966ddc8d89f9063461e084494a.bb32f9c4396722e794d4.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/index-1dbab92567f6910fdc8e.js" as="script"/></head><body><div id="__next"><div class="layout_container__2t4v2"><header class="layout_header__2rhWq"><h1 class="layout_title__24-9Z"><a href="/">🌳MORIMO🌳</a></h1></header><main><section class="home_articles__2U1qi"><ul><li><a href="/articles/2022-03-27-cloud-functions-typescript">TypeScript で Google Cloud Functions の関数を書く<!-- -->（2022年03月27日）</a></li><li><a href="/articles/2021-08-22-ellipsis-by-gradient">`mask-image` と `linear-graident()` を使った省略表現<!-- -->（2021年08月22日）</a></li><li><a href="/articles/2021-05-29-crkbd">自作キーボード入門した<!-- -->（2021年05月29日）</a></li><li><a href="/articles/2021-03-21-db-tree">RDBで階層構造をあつかう<!-- -->（2021年03月21日）</a></li><li><a href="/articles/2021-03-06-git-lines-changed">ブランチ間の変更行数を出す<!-- -->（2021年03月06日）</a></li><li><a href="/articles/2021-02-22-buri">ぶり🐟しゃぶ<!-- -->（2021年02月22日）</a></li><li><a href="/articles/2021-02-07-tuna-bowl">マグロ漬け丼<!-- -->（2021年02月07日）</a></li><li><a href="/articles/2021-02-05-xm4">SONY WH-1000XM4を買った<!-- -->（2021年02月05日）</a></li><li><a href="/articles/2021-02-01-markdown-parser">Markdownパーサーを作り始めた<!-- -->（2021年02月01日）</a></li><li><a href="/articles/2021-01-31-calendar">定期的にやりたいことをリマインドしたい<!-- -->（2021年01月31日）</a></li><li><a href="/articles/2021-01-08-nabe-zosui">鍋、雑炊、鍋、雑炊<!-- -->（2021年01月08日）</a></li><li><a href="/articles/2021-01-04-hakusai">白菜 豚バラ<!-- -->（2021年01月04日）</a></li><li><a href="/articles/2021-01-03-nabe">鶏だし蒸し鍋<!-- -->（2021年01月03日）</a></li><li><a href="/articles/2021-01-01-zettai-okiru">確実に起きる方法 2021<!-- -->（2021年01月01日）</a></li><li><a href="/articles/2020-12-31-osouji-soba">年越しそば<!-- -->（2020年12月31日）</a></li><li><a href="/articles/2020-12-20-carbonara">カルボナーラ<!-- -->（2020年12月20日）</a></li><li><a href="/articles/2020-12-16-ring-fit-adventure">リングフィットアドベンチャーを買った<!-- -->（2020年12月16日）</a></li><li><a href="/articles/2020-12-15-gmail">Gmailを整理する<!-- -->（2020年12月15日）</a></li><li><a href="/articles/2020-12-13-new-table">新しいテーブルが届いた<!-- -->（2020年12月13日）</a></li><li><a href="/articles/2020-12-12-cauliflower-gratin">カリフラワーグラタンを作った<!-- -->（2020年12月12日）</a></li><li><a href="/articles/2020-12-11-buta-komatuna-tamago">🥚 ➕ 🐷 ➕ 🥬<!-- -->（2020年12月11日）</a></li><li><a href="/articles/2020-12-10-tonteki">トンテキ🐷<!-- -->（2020年12月10日）</a></li><li><a href="/articles/2020-12-09-miso-soup">南蛮海老のみそ汁の素🍤<!-- -->（2020年12月09日）</a></li><li><a href="/articles/2020-12-08-sofa">新しいソファが届いた🛋<!-- -->（2020年12月08日）</a></li><li><a href="/articles/2020-12-07-hakusai-to-torimune">白菜と鶏むね<!-- -->（2020年12月07日）</a></li><li><a href="/articles/2020-12-06-quiche">キッシュつくった<!-- -->（2020年12月06日）</a></li></ul></section></main></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"articles":[{"id":"2022-03-27-cloud-functions-typescript","date":"2022-03-27T00:00:00.000Z","title":"TypeScript で Google Cloud Functions の関数を書く","content":"\n[functions-framework-nodejs](https://github.com/GoogleCloudPlatform/functions-framework-nodejs) を使う。\n\n## 開発環境を準備する\n[ドキュメント](https://github.com/GoogleCloudPlatform/functions-framework-nodejs/blob/master/docs/typescript.md)に従い、セットアップする。\n\n## 書く\n\n```ts\nimport {HttpFunction} from '@google-cloud/functions-framework';\n\nexport const helloWorld: HttpFunction = (req, res) =\u003e {\n  res.send('Hello, World');\n};\n```\n\n## ローカルで実行する\n\n```bash\nnpm run watch\n```\n\n\n## デプロイ\n\nセットアップで gts init したときに、npm scripts に `prepare` が追加されている。compile済みのものをデプロイする\u0026typescriptはdevDependenciesなので、不要。削除する。\n\n```diff\n- \"prepare\": \"npm run compile\",\n```\n\nデプロイ\n\n```bash\ngcloud functions deploy helloWorld \\\n--runtime nodejs16 \\\n--trigger-http \\\n--allow-unauthenticated\n```\n\n","ogp":{"title":"TypeScript で Google Cloud Functions の関数を書く","description":"[functions-framework-nodejs](https://github.com/GoogleCloudPlatform/functions-framework-nodejs) を使う。"}},{"id":"2021-08-22-ellipsis-by-gradient","date":"2021-08-22T00:00:00.000Z","title":"`mask-image` と `linear-graident()` を使った省略表現","content":"\n\u003ciframe height=\"300\" style=\"width: 100%;\" scrolling=\"no\" title=\"ellipsis\" src=\"https://codepen.io/yuki-wd/embed/ExXYbZE?default-tab=html%2Cresult\" frameborder=\"no\" loading=\"lazy\" allowtransparency=\"true\" allowfullscreen=\"true\"\u003e\n  See the Pen \u003ca href=\"https://codepen.io/yuki-wd/pen/ExXYbZE\"\u003e\n  ellipsis\u003c/a\u003e by pywd (\u003ca href=\"https://codepen.io/yuki-wd\"\u003e@yuki-wd\u003c/a\u003e)\n  on \u003ca href=\"https://codepen.io\"\u003eCodePen\u003c/a\u003e.\n\u003c/iframe\u003e\n\nこんな感じに、はみ出した部分を薄くする表現。省略表現と書いたが、省略ではない気がしてきた...\n\n## 考え方\n\n\u003e mask-image は CSS のプロパティで、要素のマスクレイヤーとして使用される画像を設定します。\n\u003e https://developer.mozilla.org/ja/docs/Web/CSS/mask-image\n\n`mask-image` に `linear-gradient()` を設定することで、指定位置以降(はみ出した場所)の要素の透明度を上げてやろうというアプローチ。\n\n## 実装\n\nはみ出したかどうかを判定したい要素(今回は `.box`)を`width: 100%`の要素(`.row`)で囲う。この`.row`に`mask-image`を設定する。\n\n`linear-gradient()` で右向きに `rgb(0,0,0)` から `rgba(0,0,0,0.4)`に変化するように設定する。それぞれ、はみ出し部分(まで|から)変化するように設定することで、グラデーションなしにはみ出し部分から透明度が上がることになる。\n\n具体的には以下のようになる\n\n```css\n.row {\n  width: 100%;\n  -webkit-mask-image: linear-gradient(\n    to right,\n    rgba(0, 0, 0, 1) 100px,\n    rgba(0, 0, 0, 0.4) 100px\n  );\n}\n```\n","ogp":{"title":"`mask-image` と `linear-graident()` を使った省略表現","description":"\u003ciframe height=\"300\" style=\"width: 100%;\" scrolling=\"no\" title=\"ellipsis\" src=\"https://codepen.io/yuki-wd/embed/ExXYbZE?default-tab=html%2Cresult\" frameborder=\"no\" loading=\"lazy\" allowtransparency=\"true\" allowfullscreen=\"true\"\u003e"}},{"id":"2021-05-29-crkbd","date":"2021-05-29T00:00:00.000Z","title":"自作キーボード入門した","content":"\nついに。買ったのは、遊舎工房の[「自作キーボード入門セット」](https://shop.yushakobo.jp/collections/keyboard/products/beginnerset?variant=37772273516705)。 Corne Cherry V3 を選択した。道具もなにひとつ持っていなかったのでググりつつ amazon で買い揃えた。\n\n## build\n\nはんだ付けは中学校以来だったので不安だったが、やってみると意外と難なくできた。 [build guide](https://github.com/foostan/crkbd/blob/master/corne-cherry/doc/v3/buildguide_jp.md) だけでは不安だったので、YouTube で[動画](https://www.youtube.com/watch?v=O49hrYDCL3o)を見つけて参考にしながら進めた。 \n\nフラックスは買っておいてよかったと思った。あるのとないのでははんだ付けのしやすさが全然違った。参考にした動画で[ペンタイプ](https://www.amazon.co.jp/dp/B07QGXT74X)を使っていて、良さそうだったので購入した。\n\n![](https://i.imgur.com/ou7v51R.jpeg \"完成\")\n\n## key map\n\nほぼデフォルトのままにしてある。しばらく使ってみてブラッシュアップしていきたい。詳細は以下の通り。\n\n### Layer 0\n![](https://i.imgur.com/lVzDy6p.png)\n\n- Cmd + Space で Alfred のショートカットをうてるように、右の Alt を Cmd に変更。\n- Layer 1, 2 切り替えキーの TAP にそれぞれ Lang 1, 2 を割り当てて、英数・かなの切り替えをできるように。\n\n### Layer 1\n![](https://i.imgur.com/XhS5Lxq.png)\n\n- 数字、Fn、矢印をあつめた\n\n### Layer 2\n![](https://i.imgur.com/23oVDAc.png)\n\n- 記号を標準的なキーボードと同じような並び・配置にした\n- 左側に余裕があったので、ボリュームUP・DOWNを追加\n\n## おわり\n\nこの記事も Corne Cherry で書いている。まだ慣れていないので結構時間がかかってしまった。練習していきたい。","ogp":{"title":"自作キーボード入門した","description":"ついに。買ったのは、遊舎工房の[「自作キーボード入門セット」](https://shop.yushakobo.jp/collections/keyboard/products/beginnerset?variant=37772273516705)。 Corne Cherry V3 を選択した。道具もなにひとつ持っていなかったのでググりつつ amazon で買い揃えた。","image":"https://i.imgur.com/ou7v51R.jpeg \"完成\""}},{"id":"2021-03-21-db-tree","date":"2021-03-21T00:00:00.000Z","title":"RDBで階層構造をあつかう","content":"\n例えばTODOアプリにおいて、親タスク、子タスク、孫タスク...のようにタスクを作成できる機能があるとする。その関係性をどうDBに保存するのかいまいちわからなかったので調べた。\n\nよく知られている手法としては以下の４つがある\n\n- 隣接リスト\n- 経路列挙\n- 閉包テーブル\n- 入れ子集合\n\nそれぞれの手法において、タスクの取得、追加、削除がどういうクエリになるのか見ていく。\n\n## 隣接リスト\n\n自分の親タスクのIDを保持する設計\n\n|id|name|parent_id|\n|---|---|---|\n|1|買い物|null|\n|2|じゃがいも|1|\n|3|にんじん|1|\n|4|掃除|null|\n|5|風呂|4|\n|6|浴槽|5|\n|7|換気扇|5|\n|8|洗面台|4|\n|9|読書|null|\n\n### タスクの取得\n\n例えば`掃除`タスク(id = 4)に紐づくタスクの取得は以下のようなクエリになる\n\n```sql\nSELECT\n\t*\nFROM\n\ttasks t1\n\tLEFT OUTER JOIN tasks t2 ON t1.id = t2.parent_id\n\tLEFT OUTER JOIN tasks t3 ON t2.id = t3.parent_id\nWHERE\n\tt1.id = 4;\n```\n\nこのクエリは、そのタスクが最大何階層あるのかを事前に知っておく必要がある、という問題がある。子タスクのネストに制限がない場合、このクエリは現実的でない。つまり、1クエリで全取得はできない。\n\n事前に何階層あるかを知らない場合、`parent_id`にヒットしたレコードのidをいれてヒットしなくなるまで検索していく方法で取得できる。\n\n```sql\nselect * from tasks where parent_id = 4; -- id 5, 8がヒット\n\nselect * from tasks where parent_id in (5, 8); -- id 6, 7がヒット\n\nselect * from tasks where parent_id in (6, 7); -- ヒットなし\n```\n\nこの方法では、階層が増えれば増えるほどクエリ実行が多くなってしまう。\n\n### タスクの追加\n親を指定して足すだけなので特に面倒なポイントはない。\n\n親タスクの追加\n```sql\ninsert into tasks (name, parent_id)\n\t\tvalues(\"勉強\", NULL);\n```\n\n子タスクの追加\n```sql\ninsert into tasks (name, parent_id)\n\t\tvalues(\"排水溝\", 5);\n```\n\n### タスクの更新\n\n親タスクを変更する場合、parent_idを書き換えるだけなので面倒ポイントなし。\n\n```sql\nupdate tasks set parent_id = 4 where id = 11\n```\n\n### タスクの削除\n\n子を持つ親タスクの削除で、子も含めて削除する場合を考える。そのタスクが持つ子タスクを知る必要があるので、取得と同様、ヒットしなくなるまで検索して子タスクのidを調べる必要がある。\n\n```sql\nselect * from tasks where parent_id = 4; -- id 5, 8がヒット\n\nselect * from tasks where parent_id in (5, 8); -- id 6, 7がヒット\n\nselect * from tasks where parent_id in (6, 7); -- ヒットなし\n\ndelete from tasks where id in (4, 5, 8, 6, 7);\n```\n\nただし、`parent_id`に外部キー制約で`ON DELETE CASCADE`を設定しておけば、親を消した段階ですべて消える\n\n```sql\nALTER TABLE tasks\n\tADD FOREIGN KEY (`parent_id`) REFERENCES tasks (`id`) ON DELETE CASCADE;\n\ndelete from tasks where id = 4;\n```\n\n### 再帰クエリ\n\n再帰クエリを利用すれば、取得クエリの数は減る。詳細は後日書く。\n\n[再帰クエリで木構造のデータを取得する](http://interprism.hatenablog.com/entry/fetch-tree-by-recursive-query)\n\n## 経路列挙\n\nrootまでの経路を`/`などの文字列で区切って保持する設計\n\n|id|name|path|\n|---|---|---|\n|1|買い物|1|\n|2|じゃがいも|1/2|\n|3|にんじん|1/3|\n|4|掃除|4|\n|5|風呂|4/5|\n|6|浴槽|4/5/6|\n|7|換気扇|4/5/7|\n|8|洗面台|4/8|\n|9|読書|9|\n\n### タスクの取得\n\n例えば`掃除`タスク(id = 4)に紐づくタスクの取得は以下のようなクエリになる\n\n```sql\nSELECT\n\t*\nFROM\n\ttasks2\nWHERE\n\t`path` LIKE '4'\n\tOR `path` LIKE '4/%'\n```\n\n### タスクの追加\n\n親タスクの追加。`id`が`auto_increment`の場合、まずはpathなしでinsertし、採番されたIDを確認してupdateをかける方法が考えられる。（他になにかいい感じにやれる方法あるんだろうか？）\n\n```sql\nINSERT INTO tasks2 (`name`)\n\t\tVALUES(\"親タスク\"); -- id 10が採番された\nUPDATE tasks2 SET `path` = '10' WHERE id = 10;\n```\n\n子タスク追加は、親になるタスクの`path`に自分のidを追加して保存すれば良い。クエリは↑と同様。\n\n### タスクの削除\n\n親とそれに関連する子すべてを削除する場合を考える。\n\n```sql\nDELETE FROM tasks2\nWHERE `path` = '4'\n\tOR `path` LIKE '4/%'\n```\n\n手軽に消せる。\n\n## 閉包テーブル\n\n親子関係を専用のテーブルで管理する設計。具体的には、以下のようなタスクがあるとき\n\n|id|name|\n|---|---|\n|1|買い物|\n|2|じゃがいも|\n|3|にんじん|\n|4|掃除|\n|5|風呂|\n|6|浴槽|\n|7|換気扇|\n|8|洗面台|\n|9|読書|\n\n親子関係全パターン(直接の親子だけではない)を管理するテーブルを用意する。\n\n|parent_id|child_id|\n|---|---|\n|1|1|\n|1|2|\n|1|3|\n|4|4|\n|4|5|\n|4|6|\n|4|7|\n|4|8|\n|5|5|\n|5|6|\n|5|7|\n|6|6|\n|7|7|\n|8|8|\n|9|9|\n\n### タスクの取得\n\n`掃除`タスク(id = 4)に紐づくタスクの取得\n\n```sql\nSELECT\n\t*\nFROM\n\ttasks3 AS t\n\tINNER JOIN task_hierarchie AS h ON t.id = h.child_id\nWHERE\n\th.parent_id = 4;\n```\n\n閉包テーブル(`task_hierarchie`)の`parent_id`=4を探すだけでいい。\n\n### タスク追加\n\n一番上の階層にタスクを足す場合\n```sql\nINSERT INTO tasks (`name`)\n\t\tVALUES(\"散歩\");\nINSERT INTO task_hierarchie\n\t\tVALUES(10, 10);\n```\n\n子タスクの追加。子タスク自身のidと、子を足す対象の親全てに子のidを足す。例えば、掃除/風呂(id=5)の子に排水溝を足す場合、親である、掃除(id=4)と風呂(id=5)それぞれに排水溝のidのパターンを追加する。また\n\n対象のすべての親を探すとき、`task_hierarchie`の`child_id`が対象idと一致の条件で検索すればよい。\n\n```sql\nINSERT INTO tasks (`name`)\n\t\tVALUES(\"排水溝\"); -- id=10\n\nINSERT INTO task_hierarchie\nSELECT\n\th.parent_id,\n\t10\nFROM\n\ttask_hierarchie AS h\nWHERE\n\th.child_id = 5\nUNION ALL\nSELECT\n\t10,\n\t10;\n```\n\n### タスク削除\n\n掃除タスク(id=4)を削除する場合\n\n```sql\nDELETE FROM tasks3\nWHERE id IN(\n\t\tSELECT\n\t\t\tchild_id FROM task_hierarchie\n\t\tWHERE\n\t\t\tparent_id = 4);\n\nDELETE FROM task_hierarchie\nWHERE parent_id = 4;\n```\n\n## 入れ子集合\n\n後で書く。\n\n[SQLで木と階層構造のデータを扱う（１）―― 入れ子集合モデル](https://mickindex.sakura.ne.jp/database/db_tree_ns.html)\n\n\n## まとめ\n\n隣接リストは、階層上限がある、かつ深くならない場合において利用できる。が、しかし上限を深くしたくなったときにキツイ。\n\n経路列挙は経路が文字列で、正しくないパスがinsertされてしまう可能性を考えるとキツイ。また、auto_incrementのとき一度insertしてidを確認してupdateする必要があるのも面倒。\n\n閉包テーブルはデータ量が多くなってしまいがちだが、手間なく各種操作ができるので有用に感じた。\n\n個人的に作成しているアプリケーションで階層構造を考える必要があり、調べてみた。要件として上限が決まっている、かつ浅いので隣接リストか閉包テーブルを利用するのが妥当と判断。使い勝手と今後上限をなくしても問題ないことから、最終的には閉包テーブルを選択した。","ogp":{"title":"RDBで階層構造をあつかう","description":"例えばTODOアプリにおいて、親タスク、子タスク、孫タスク...のようにタスクを作成できる機能があるとする。その関係性をどうDBに保存するのかいまいちわからなかったので調べた。"}},{"id":"2021-03-06-git-lines-changed","date":"2021-03-06T00:00:00.000Z","title":"ブランチ間の変更行数を出す","content":"\nってググればでる。\n\n```bash\ngit log --numstat --pretty=\"%H\" branch1..branch2  | awk 'NF==3 {plus+=$1; minus+=$2} END {printf(\"+%d, -%d\\n\", plus, minus)}'\n```\n\n参考：[How can I calculate the number of lines changed between two commits in Git?](https://stackoverflow.com/questions/2528111/how-can-i-calculate-the-number-of-lines-changed-between-two-commits-in-git/2528129#2528129)\n\nただ内容が理解できないし、理解できていないのはキモいので紐解く。\n\n## `--numstat`\n\n\u003e Similar to `--stat`, but shows number of added and deleted lines in decimal notation and pathname without abbreviation, to make it more machine friendly. For binary files, outputs two `-` instead of saying `0 0`.\n\n[--numstat｜https://git-scm.com](https://git-scm.com/docs/git-log#Documentation/git-log.txt---numstat)\n\n`--stat`？\n\n\u003e Generate a diffstat.\n\n[--stat｜https://git-scm.com](https://git-scm.com/docs/git-log#Documentation/git-log.txt---numstat)\n\ndiffstatはdiff結果から各ファイルの追加・削除行数をまとめて出してくれるやつぽい。\n\nつまり、`—numstat`はそのdiffstatを`追加行数 削除行数 ファイルパス`形式で出力してくれる。\n\n## `--pretty`\n\nコミットログを指定した形式で表示する。例えば、`%H` はコミットハッシュ。\n\nつまり、`git log —numstat —pretty=\"%H\"` は以下のような出力になる\n\n```bash\nf7cc64ff097f165df3ac457acac183f377acdc0c\n\n16      0       package-lock.json\n2       1       package.json\n34      21      src/index.ts\ne6490bc5ec9da0da9419acfc28186638e9ad6255\n\n1       1       README.md\n```\n\nで、次はパイプ以降何をしているのか見ていく。\n\n## `awk`\n\n空白もしくは`-F`オプションで指定した正規表現にマッチする文字で区切られた文字列を処理するコマンド。\n[【 awk 】コマンド（基本編）――テキストの加工とパターン処理を行う](https://www.atmarkit.co.jp/ait/articles/1706/02/news017.html)\n\n`パターン{アクション}`の形式で指定した処理をしていく。\n\n例えば、`NF==3 {plus+=$1; minus+=$2}`のパターン`NF==3`は、空白で区切られた文字列の数が3つの行を指す。`—-numstat` は追加行数、削除行数、ファイルパスが空白で区切られてるので、一致する。つまり、追加行数、削除行数、ファイルパスの行で、plus、minusという変数に追加・削除行数を足し込む、という処理になる。\n\nまた、ENDは最終行のあと、というパターン。つまり、`END {printf(\"+%d, -%d\\n\", plus, minus)}`は最終行まで処理したあと、`\"+%d, -%d\\n\"`形式でそれぞれ追加行数、削除行数を出力するという処理になる。\n\nなるほど、たしかに\n\n```\ngit log --numstat --pretty=\"%H\" branch1..branch2  | awk 'NF==3 {plus+=$1; minus+=$2} END {printf(\"+%d, -%d\\n\", plus, minus)}'\n```\n\nがブランチ間の変更行数を出すことがわかった。\n\nただ、`--pretty`でわざわざ`%H`とする必要性はないように思う。コミットハッシュは最終的な出力に関係ないので。コミットに関する情報は消して、各ファイルの変更行数情報だけが出力されればおｋである。つまり、完成形としては、以下のようになる。\n\n```bash\ngit log --numstat --pretty=\"\" branch1..branch2  | awk 'NF==3 {plus+=$1; minus+=$2} END {printf(\"+%d, -%d\\n\", plus, minus)}'\n```","ogp":{"title":"ブランチ間の変更行数を出す","description":"ってググればでる。"}},{"id":"2021-02-22-buri","date":"2021-02-22T00:00:00.000Z","title":"ぶり🐟しゃぶ","content":"\n高知かわうそ市場で[50%オフ特売キャンペーン](https://kochi-kawauso.com/collections/campaign-tokubai202102)をしていたので、以前も買った須崎鰤を買った。\n\n![ぶりしゃぶ](https://i.imgur.com/EcfIlwt.jpg)\n\n初日はは刺し身、２日目の今日はぶりしゃぶを堪能した。前回より上手く切れるようになった気がする。それにしても、めちゃめちゃにうまかった。まだ少し余ってるので、ぶり大根とかそのへんをやろうかな。\n\n明日は鯛も届くから楽しみ。","ogp":{"title":"ぶり🐟しゃぶ","description":"高知かわうそ市場で[50%オフ特売キャンペーン](https://kochi-kawauso.com/collections/campaign-tokubai202102)をしていたので、以前も買った須崎鰤を買った。","image":"https://i.imgur.com/EcfIlwt.jpg"}},{"id":"2021-02-07-tuna-bowl","date":"2021-02-07T00:00:00.000Z","title":"マグロ漬け丼","content":"\nマグロの漬け丼を食べた。\n\n![マグロの漬け丼](https://i.imgur.com/TcVABNE.jpg)\n\n少し前に高知かわうそ市場で買った[マグロ](https://kochi-kawauso.com/products/fuji-maguro1kg)が余っていたので、漬け丼にして食べた。相変わらず切り方よくわからんのでてきとーにぶった切って載せただけだけど、舌が馬鹿なのでうまかったし満足した。\n\n![マグロ](https://i.imgur.com/b2aAjtT.jpg)\n\nかわうそ市場では以前、訳ありブリを購入したが、それも最高にうまかった。普段自炊してても魚を買うことがないし、スーパーで買う気も起きないので、こういうところでポチってちょいちょい食べていきたい。\n","ogp":{"title":"マグロ漬け丼","description":"マグロの漬け丼を食べた。","image":"https://i.imgur.com/TcVABNE.jpg"}},{"id":"2021-02-05-xm4","date":"2021-02-05T00:00:00.000Z","title":"SONY WH-1000XM4を買った","content":"\nいつのまにかairpods proをなくしてしまったため、代わりにWH-1000XM4を買った。\n\n![](https://i.imgur.com/mLMCbRT.jpg)\n\n[beats solo pro](https://www.beatsbydre.com/jp/headphones/solo-pro)と迷ったが、オンイヤーは耳が痛くなって耐えられないだろうと思い、WH-1000XM4にした。この判断は正解で、全然耳が痛くならない。\n\n同じくSONYの[WF-1000XM3](https://www.sony.jp/headphone/products/WF-1000XM3/)を持っていて、買った当時はノイキャンってすげーなとはしゃいでいたが、WH-1000XM4はそれ以上にすごかった。つけた瞬間、しんとなるのはほんとにすごい。\n\nあとは、操作性もよい。耳の部分をタッチで操作するが、イヤホンと違って面積が広いので押しやすいし、誤タップすることもない。次の曲、前の曲といった操作も直感的だし、ストレスなく操作を検知してくれる。素晴らしい。\n\nただ、僕の頭がクソでかいので、長時間つけていると頭が痛くなる。これはどうしようもない。。頭がでかい人向けのヘッドホン出してください。","ogp":{"title":"SONY WH-1000XM4を買った","description":"いつのまにかairpods proをなくしてしまったため、代わりにWH-1000XM4を買った。","image":"https://i.imgur.com/mLMCbRT.jpg"}},{"id":"2021-02-01-markdown-parser","date":"2021-02-01T00:00:00.000Z","title":"Markdownパーサーを作り始めた","content":"\nMarkdownパーサーを作り始めた。\n\n今まで人生で一度もパーサー的な実装をしたことがなかったことと、このブログの実装において利用しているremarkを自作のもので置き換えてみたい欲から作り始めた。[CommonMark 0.29](https://spec.commonmark.org/0.29/) の仕様にのっとって実装を進めている。headers, code blocksなど各仕様ごとに実例があるのでそれをテストケースとしてテストしている。\n\n各テストケースをpassできるように実装していくため、目に見えて進捗率がわかりやすいのでモチベーションを維持しやすいのがとても良い（といってもまだ5日目）。毎朝少しずつ進めていき、将来的にはブログのmarkdownのパース処理を置き換えたい。","ogp":{"title":"Markdownパーサーを作り始めた","description":"Markdownパーサーを作り始めた。"}},{"id":"2021-01-31-calendar","date":"2021-01-31T00:00:00.000Z","title":"定期的にやりたいことをリマインドしたい","content":"\n年始には今年はちゃんと掃除をするし早起きをするし運動もして勉強もするぞ〜〜〜と意気込んでいたものの、1ヶ月もたたないうちに継続できなくなっていった（主に掃除運動）。そもそも、定期的にやりたいことの、なにが、いつやりたいことなのかを記憶しておくことができない。\n\nということで、この問題を解消すべく、なにかリマインドしてくれるようなサービスでも作ろうかと思いたった。隔週、毎月第一水曜、4日ごと、など柔軟に間隔を設定できるといいよな〜と思いながら案を出していたが、Googleカレンダーを使えばいいことに気づいた。Googleカレンダーがかなり柔軟に間隔設定できることを知らなかった。\n\nひとまず、思いついたものをGoogleカレンダーに登録し、通知オンにしておいた。これで来月からは意識高めな生活を遅れるに違いない。\n","ogp":{"title":"定期的にやりたいことをリマインドしたい","description":"年始には今年はちゃんと掃除をするし早起きをするし運動もして勉強もするぞ〜〜〜と意気込んでいたものの、1ヶ月もたたないうちに継続できなくなっていった（主に掃除運動）。そもそも、定期的にやりたいことの、なにが、いつやりたいことなのかを記憶しておくことができない。"}},{"id":"2021-01-08-nabe-zosui","date":"2021-01-08T00:00:00.000Z","title":"鍋、雑炊、鍋、雑炊","content":"\n最近やたらとメシを作るのが面倒なんだけど、鍋と雑炊を繰り返せばいいことに気づいてしまった。\n\n![ある日の雑炊](https://i.imgur.com/H6PeuwJ.jpeg)\n\n野菜と肉切って鍋キューブと一緒に煮込むだけ。すげー楽。余った汁は翌日雑炊にできる。朝食べてもいいし、昼飯でもいいし、夜食べてもイケる。万能すぎるぞ、鍋。\n\nこれからしばらくは、安売りされてる野菜と肉と、良さげな鍋キューブ的なのを見つけてきて毎日鍋をしようとおもう。\n","ogp":{"title":"鍋、雑炊、鍋、雑炊","description":"最近やたらとメシを作るのが面倒なんだけど、鍋と雑炊を繰り返せばいいことに気づいてしまった。","image":"https://i.imgur.com/H6PeuwJ.jpeg"}},{"id":"2021-01-04-hakusai","date":"2021-01-04T00:00:00.000Z","title":"白菜 豚バラ","content":"\n[昨日](https://m0r1m0.github.io/articles/2021-01-03-nabe)に続き、白菜。塩ダレ炒めで食べた。⭐５。\n\n![豚バラと白菜のとろとろ塩だれ炒め](https://i.imgur.com/x2coBbB.jpg \"豚バラと白菜のとろとろ塩だれ炒め\")\n\n今日のレシピは、[とろみづけ不要♪『豚バラと白菜のとろとろ塩だれ炒め』](https://oceans-nadia.com/user/22780/recipe/220209)","ogp":{"title":"白菜 豚バラ","description":"[昨日](https://m0r1m0.github.io/articles/2021-01-03-nabe)に続き、白菜。塩ダレ炒めで食べた。⭐５。","image":"https://i.imgur.com/x2coBbB.jpg \"豚バラと白菜のとろとろ塩だれ炒め\""}},{"id":"2021-01-03-nabe","date":"2021-01-03T00:00:00.000Z","title":"鶏だし蒸し鍋","content":"\n白菜が大量にあるので、蒸し鍋をした。⭐５。うまい。\n\n![鶏だし蒸し鍋](https://i.imgur.com/1ipS2EE.jpg \"鶏だし蒸し鍋\")\n\nスーパーが年末から1/5まで休みだったので、事前にやすかった白菜を大量に買ってた。消費するために、蒸し鍋にした。レシピは、[白菜で簡単！鶏だし蒸し鍋](https://park.ajinomoto.co.jp/recipe/card/800225/)\n\n切って並べて蓋して15分なのでとても楽だった。かつ、うまい。野菜を取れたので健康に気を使えた感もでて良い。","ogp":{"title":"鶏だし蒸し鍋","description":"白菜が大量にあるので、蒸し鍋をした。⭐５。うまい。","image":"https://i.imgur.com/1ipS2EE.jpg \"鶏だし蒸し鍋\""}},{"id":"2021-01-01-zettai-okiru","date":"2021-01-01T00:00:00.000Z","title":"確実に起きる方法 2021","content":"\nぼくは弱いので前日夜、早起きするぞと意気込んでも、ほぼ確実に二度寝をしてしまう。\n\n確実に起きるにはどうすればいいか模索した結果、結論に至った。**マックデリバリーを起きたい時間に頼めばいい(ただし、一番はやくて 7:30)。**\n\n結局、二度寝してしまうのはもう一度寝てしまっても問題ないという気持ちからなので、強制的になにかしなければいけない状況を作ればいい。宅配の場合、インターホンが鳴ってロック解除、その後玄関先に来て受け取りの二段構成になってるので、二度寝する余地がない。さらに、朝は腹が減ってるので、二度寝よりもメシを食おうと思える。\n\n### メリット\n\n- 確実に起きられる\n- 朝マック うまい\n\n### デメリット\n\n- 無駄に食費がかかる\n- 健康的に不安\n- マックを食べるとたいていお腹痛くなってしまう\n\nデメリット割とつらいところなので、またいい案思いついたら書く。\n","ogp":{"title":"確実に起きる方法 2021","description":"ぼくは弱いので前日夜、早起きするぞと意気込んでも、ほぼ確実に二度寝をしてしまう。"}},{"id":"2020-12-31-osouji-soba","date":"2020-12-31T00:00:00.000Z","title":"年越しそば","content":"\n年越しそば食べた。\n\n![そば](https://i.imgur.com/bxbj508.jpg \"年越しそば\")\n\n去年の 12 月頃今のマンションに引っ越してきたんだけど、あれからもう 1 年以上経ってしまったのかと思うと、時間の経過が早すぎて怖い。\n\n1 年振り返って、成長できたなという実感があまりないので悲しい。来年はなにか振り返ることができるものを残していきたい。\n","ogp":{"title":"年越しそば","description":"年越しそば食べた。","image":"https://i.imgur.com/bxbj508.jpg \"年越しそば\""}},{"id":"2020-12-20-carbonara","date":"2020-12-20T00:00:00.000Z","title":"カルボナーラ","content":"\n昼、カルボナーラを食べた。\n\n![カルボナーラ](https://i.imgur.com/okP7RcZ.jpeg)\n\n作るのめっちゃ簡単なうえにベーコンと卵っていう完璧な組み合わせでめちゃめちゃにうまいので、平日昼間とか時間のないときはしょっちゅう作ってる。\n\nカルボナーラ以外にもなんかサクッと作れるレシピ覚えたいなあ。\n","ogp":{"title":"カルボナーラ","description":"昼、カルボナーラを食べた。","image":"https://i.imgur.com/okP7RcZ.jpeg"}},{"id":"2020-12-16-ring-fit-adventure","date":"2020-12-16T00:00:00.000Z","title":"リングフィットアドベンチャーを買った","content":"\n三日前 Amazon で買ったリングフィットアドベンチャーが届いた。\n\n![リングフィットアドベンチャー](https://i.imgur.com/Zm25fo3.jpg)\n\n去年の年末からほしいほしいと思っていたリングフィットアドベンチャーがようやく手に入った。何度 Amazon を見ても転売しかなく、ほぼ諦めていたが、三日前ふと Amazon をのぞくと、「販売: アマゾンジャパン合同会社」な定価のリングフィットアドベンチャーが並んでいた。\n\nお届け予定日が 1/5 だったが、これを逃すとまたしばらく買えないだろうと思い、即ポチった。\n\n更には、その翌日になって、お届け予定日が 12/16 に変更された。\n\n![1/5から12/16に変更](https://i.imgur.com/Y9VPQVW.jpg)\n\n今年の運を使い切ったに違いない。これを気に毎日やっていきたい。","ogp":{"title":"リングフィットアドベンチャーを買った","description":"三日前 Amazon で買ったリングフィットアドベンチャーが届いた。","image":"https://i.imgur.com/Zm25fo3.jpg"}},{"id":"2020-12-15-gmail","date":"2020-12-15T00:00:00.000Z","title":"Gmailを整理する","content":"\n年末だし掃除したい気分になった。毎日数十件未読がたまっていって、ほぼ読めてない状態だったので、整理することにした。\n\nまず、最新の未読から、必要なものをカテゴリ分けして、ラベルを付けていった。300 件くらいラベルをつけたところで力尽きた。\n\n諦めて、どうせ読まないので全件既読にして、新しく届くものから順にルールを作ってラベルを振るなり、Unsubscribe するなりしていくことにした。\n\n1password で管理できていないアカウントがあったり、有効期限切れかけのポイントがあったり、そのへん把握できたので、割と良かった。\n","ogp":{"title":"Gmailを整理する","description":"年末だし掃除したい気分になった。毎日数十件未読がたまっていって、ほぼ読めてない状態だったので、整理することにした。"}},{"id":"2020-12-13-new-table","date":"2020-12-13T00:00:00.000Z","title":"新しいテーブルが届いた","content":"\n新しいテーブルが届いた。かわいい。\n\n![新しいテーブル](https://i.imgur.com/ix72MiC.jpg)\n\n[ソファが届いた記事](https://m0r1m0.github.io/articles/2020-12-08-sofa)で書いたように、ソファダイニングのためのテーブル。高さ調節ができるので、良い。\n\n今回は[LOWYA](https://www.low-ya.com/goods/F706_G1010)で買った。見た目かわいいし、高さ調節もできて基本的には満足している。ただ、脚がくろすしているので邪魔になることはある。\n\n本腰入れてここで作業することはないので、まあおｋ。\n","ogp":{"title":"新しいテーブルが届いた","description":"新しいテーブルが届いた。かわいい。","image":"https://i.imgur.com/ix72MiC.jpg"}},{"id":"2020-12-12-cauliflower-gratin","date":"2020-12-12T00:00:00.000Z","title":"カリフラワーグラタンを作った","content":"\nばあちゃんから貰ったオレンジ色のカリフラワーでグラタンを作った。\n\n![カリフラワーグラタン](https://i.imgur.com/EtOWZyd.jpg \"カリフラワーグラタン\")\n\nレシピは、[ホワイトソースいらずの「カリフラワーのグラタン](https://youtu.be/sNiA8oQO9hc)\n思い描いてたグラタンではなかったけど、めちゃくちゃうまかった。\n","ogp":{"title":"カリフラワーグラタンを作った","description":"ばあちゃんから貰ったオレンジ色のカリフラワーでグラタンを作った。","image":"https://i.imgur.com/EtOWZyd.jpg \"カリフラワーグラタン\""}},{"id":"2020-12-11-buta-komatuna-tamago","date":"2020-12-11T00:00:00.000Z","title":"🥚 ➕ 🐷 ➕ 🥬","content":"\nばあちゃんから貰ったものシリーズ。小松菜があまってたので、今日やすかった豚肉と卵でてきとーなレシピを検索して作った。まあ、うまかった。\n\n![豚と小松菜と卵の炒めもの](https://i.imgur.com/0QRxplu.jpg \"豚と小松菜と卵の炒めもの\")\n\n今日のレシピは、[タレが絡む ☆ 豚肉と卵、小松菜の炒めもの](https://cookpad.com/recipe/2844337)\n","ogp":{"title":"🥚 ➕ 🐷 ➕ 🥬","description":"ばあちゃんから貰ったものシリーズ。小松菜があまってたので、今日やすかった豚肉と卵でてきとーなレシピを検索して作った。まあ、うまかった。","image":"https://i.imgur.com/0QRxplu.jpg \"豚と小松菜と卵の炒めもの\""}},{"id":"2020-12-10-tonteki","date":"2020-12-10T00:00:00.000Z","title":"トンテキ🐷","content":"\n冷凍してた豚ロースがあったので、トンテキ作った。相変わらず野菜がないが、うまければそれでいい。\n\n![トンテキ](https://i.imgur.com/lBARgzm.jpg)\n\nレシピは[ちゃんすー](https://twitter.com/suuxs)に教えてもらった神。あざす。\n","ogp":{"title":"トンテキ🐷","description":"冷凍してた豚ロースがあったので、トンテキ作った。相変わらず野菜がないが、うまければそれでいい。","image":"https://i.imgur.com/lBARgzm.jpg"}},{"id":"2020-12-09-miso-soup","date":"2020-12-09T00:00:00.000Z","title":"南蛮海老のみそ汁の素🍤","content":"\n[南蛮海老のみそ汁の素](https://www.kaldi.co.jp/ec/pro/disp/1/4571347775525)でみそ汁を作った。めっちゃエビ。めっちゃうまい。\n\n![南蛮海老のみそ汁の素](https://i.imgur.com/CUzUqz5.jpg \"南蛮海老のみそ汁の素\")\n![みそ汁と鶏むね肉のみぞれ煮](https://i.imgur.com/PLIutFo.jpg \"みそ汁と鶏むね肉のみぞれ煮\")\n\nみそ汁の素大さじ1と熱湯150mlを注ぐだけでみそ汁ができて便利すぎる。これから朝ごはんに海老のみそ汁飲む。\n\nそれから、ばあちゃんに送ってもらった大根が余ってるので鶏むね肉のみぞれ煮も作った。うまし。\nまだまだ大根余ってるので、鍋とかしようかな。。\n\n","ogp":{"title":"南蛮海老のみそ汁の素🍤","description":"[南蛮海老のみそ汁の素](https://www.kaldi.co.jp/ec/pro/disp/1/4571347775525)でみそ汁を作った。めっちゃエビ。めっちゃうまい。","image":"https://i.imgur.com/CUzUqz5.jpg \"南蛮海老のみそ汁の素\""}},{"id":"2020-12-08-sofa","date":"2020-12-08T00:00:00.000Z","title":"新しいソファが届いた🛋","content":"\n新しいソファが届いた。めちゃかわ。[大川家具のPURI](https://www.amazon.co.jp/dp/B00TAT68DK/ref=cm_sw_em_r_mt_dp_YC5ZFbBK4GXF4)という二人がけソファを買った。\n\n![ソファ](https://i.imgur.com/HLp7O8U.jpg)\n\nこれが以前使っていたソファ。３年前新卒で東京に引っ越してきたときに買ったもので、ヘタってしまって座ると固くお尻が痛いレベルだった。\n\n![古いソファ](https://i.imgur.com/rzti8bH.jpg)\n\nうちにはダイニングテーブル・チェアがないので、食事は地べたに座ってソファの前のローテーブルで食べる方式だったが、寒いしケツもいたいので、ソファダイニングにしようと思ってまずはソファを買った。\n\n12日にはテーブルが届く予定なので、楽しみ。","ogp":{"title":"新しいソファが届いた🛋","description":"新しいソファが届いた。めちゃかわ。[大川家具のPURI](https://www.amazon.co.jp/dp/B00TAT68DK/ref=cm_sw_em_r_mt_dp_YC5ZFbBK4GXF4)という二人がけソファを買った。","image":"https://i.imgur.com/HLp7O8U.jpg"}},{"id":"2020-12-07-hakusai-to-torimune","date":"2020-12-07T00:00:00.000Z","title":"白菜と鶏むね","content":"\nスーパーで安い肉が鶏むねしかなかったので、余ってた白菜でなんか作った。うんまかった。\n\n![鶏むね肉と白菜の中華風とろうま煮](https://i.imgur.com/T2oQd8ah.jpg)\n\n栄養を考えてメシを作ったことがないので、来年は栄養素を考えた健康的な食事ができるように意識していきたい。\n\n今日のレシピは、[重ねて放置 ♪ お肉柔らか『鶏むね肉と白菜の中華風 ♡ とろうま煮』](https://oceans-nadia.com/user/22780/recipe/203036)\n","ogp":{"title":"白菜と鶏むね","description":"スーパーで安い肉が鶏むねしかなかったので、余ってた白菜でなんか作った。うんまかった。","image":"https://i.imgur.com/T2oQd8ah.jpg"}},{"id":"2020-12-06-quiche","date":"2020-12-06T00:00:00.000Z","title":"キッシュつくった","content":"\nばあちゃんからほうれん草とカリフラワーをもらった＆生クリームが余っていたのでキッシュを作った。\n\n![quiche](https://i.imgur.com/BC4EDxKh.jpg)\n\nカリフラワーが少なかったのであまりカリフラワー感がなかったが、いつもどおり美味かった。\n\nところで、実家で出てくるキッシュはパイ生地なしだったので、家の外でキッシュを見たときは驚いた。でも、パイはないほうが絶対美味い。作るのも楽だし。\n","ogp":{"title":"キッシュつくった","description":"ばあちゃんからほうれん草とカリフラワーをもらった＆生クリームが余っていたのでキッシュを作った。","image":"https://i.imgur.com/BC4EDxKh.jpg"}}]},"__N_SSG":true},"page":"/","query":{},"buildId":"AKsjkRQKxjApl3RmLACT5","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-11c8eba6a84e3fddec04.js"></script><script src="/_next/static/chunks/main-1aebe1c5ebad78b6eefd.js" async=""></script><script src="/_next/static/chunks/webpack-e067438c4cf4ef2ef178.js" async=""></script><script src="/_next/static/chunks/framework.2113c6061a2f456066a1.js" async=""></script><script src="/_next/static/chunks/commons.040a3874e38b7cc6b430.js" async=""></script><script src="/_next/static/chunks/pages/_app-5874fa266a7d44909009.js" async=""></script><script src="/_next/static/chunks/c5b568cee8545d966ddc8d89f9063461e084494a.bb32f9c4396722e794d4.js" async=""></script><script src="/_next/static/chunks/pages/index-1dbab92567f6910fdc8e.js" async=""></script><script src="/_next/static/AKsjkRQKxjApl3RmLACT5/_buildManifest.js" async=""></script><script src="/_next/static/AKsjkRQKxjApl3RmLACT5/_ssgManifest.js" async=""></script></body></html>