<!DOCTYPE html><html><head><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-N6MC6SMGJM"></script><script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'G-N6MC6SMGJM', {
              page_path: window.location.pathname,
            });
          </script><link rel="alternate" type="application/rss+xml" title="RSS feed" href="/rss.xml"/><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>RDBã§éšå±¤æ§‹é€ ã‚’ã‚ã¤ã‹ã†</title><meta property="og:title" content="RDBã§éšå±¤æ§‹é€ ã‚’ã‚ã¤ã‹ã†"/><meta property="og:description" content="ä¾‹ãˆã°TODOã‚¢ãƒ—ãƒªã«ãŠã„ã¦ã€è¦ªã‚¿ã‚¹ã‚¯ã€å­ã‚¿ã‚¹ã‚¯ã€å­«ã‚¿ã‚¹ã‚¯...ã®ã‚ˆã†ã«ã‚¿ã‚¹ã‚¯ã‚’ä½œæˆã§ãã‚‹æ©Ÿèƒ½ãŒã‚ã£ãŸã¨ã—ã¦ã€ãã®é–¢ä¿‚æ€§ã‚’ã©ã†DBã«ä¿å­˜ã™ã‚‹ã®ã‹ã€ã‚ã‹ã‚‰ãªã‹ã£ãŸã®ã§èª¿ã¹ãŸã€‚"/><meta name="twitter:card" content="summary"/><meta name="next-head-count" content="6"/><link rel="preload" href="/_next/static/css/1e8ccdab538ecc583dd2.css" as="style"/><link rel="stylesheet" href="/_next/static/css/1e8ccdab538ecc583dd2.css" data-n-g=""/><link rel="preload" href="/_next/static/css/8c35c68098dd8759f6c1.css" as="style"/><link rel="stylesheet" href="/_next/static/css/8c35c68098dd8759f6c1.css" data-n-p=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/main-1aebe1c5ebad78b6eefd.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-e067438c4cf4ef2ef178.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.2113c6061a2f456066a1.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.040a3874e38b7cc6b430.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-5874fa266a7d44909009.js" as="script"/><link rel="preload" href="/_next/static/chunks/c5b568cee8545d966ddc8d89f9063461e084494a.bb32f9c4396722e794d4.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/articles/%5Bid%5D-16081245fdd7df34b03c.js" as="script"/></head><body><div id="__next"><div class="layout_container__2t4v2"><header class="layout_header__2rhWq"><h1 class="layout_title__24-9Z"><a href="/">ğŸŒ³MORIMOğŸŒ³</a></h1></header><main><article class="detail_article__3SXso"><div><span>2021å¹´03æœˆ21æ—¥</span><h1>RDBã§éšå±¤æ§‹é€ ã‚’ã‚ã¤ã‹ã†</h1></div><div><p>ä¾‹ãˆã°TODOã‚¢ãƒ—ãƒªã«ãŠã„ã¦ã€è¦ªã‚¿ã‚¹ã‚¯ã€å­ã‚¿ã‚¹ã‚¯ã€å­«ã‚¿ã‚¹ã‚¯...ã®ã‚ˆã†ã«ã‚¿ã‚¹ã‚¯ã‚’ä½œæˆã§ãã‚‹æ©Ÿèƒ½ãŒã‚ã£ãŸã¨ã—ã¦ã€ãã®é–¢ä¿‚æ€§ã‚’ã©ã†DBã«ä¿å­˜ã™ã‚‹ã®ã‹ã€ã‚ã‹ã‚‰ãªã‹ã£ãŸã®ã§èª¿ã¹ãŸã€‚</p>
<p>ã‚ˆãçŸ¥ã‚‰ã‚Œã¦ã„ã‚‹æ‰‹æ³•ã¨ã—ã¦ã¯ä»¥ä¸‹ã®ï¼”ã¤ãŒã‚ã‚‹</p>
<ul>
<li>éš£æ¥ãƒªã‚¹ãƒˆ</li>
<li>çµŒè·¯åˆ—æŒ™</li>
<li>é–‰åŒ…ãƒ†ãƒ¼ãƒ–ãƒ«</li>
<li>å…¥ã‚Œå­é›†åˆ</li>
</ul>
<p>ãã‚Œãã‚Œã®æ‰‹æ³•ã«ãŠã„ã¦ã€ã‚¿ã‚¹ã‚¯ã®å–å¾—ã€è¿½åŠ ã€å‰Šé™¤ãŒã©ã†ã„ã†ã‚¯ã‚¨ãƒªã«ãªã‚‹ã®ã‹è¦‹ã¦ã„ãã€‚</p>
<h2>éš£æ¥ãƒªã‚¹ãƒˆ</h2>
<p>è‡ªåˆ†ã®è¦ªã‚¿ã‚¹ã‚¯ã®IDã‚’ä¿æŒã™ã‚‹è¨­è¨ˆ</p>
<table>
<thead>
<tr>
<th>id</th>
<th>name</th>
<th>parent_id</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>è²·ã„ç‰©</td>
<td>null</td>
</tr>
<tr>
<td>2</td>
<td>ã˜ã‚ƒãŒã„ã‚‚</td>
<td>1</td>
</tr>
<tr>
<td>3</td>
<td>ã«ã‚“ã˜ã‚“</td>
<td>1</td>
</tr>
<tr>
<td>4</td>
<td>æƒé™¤</td>
<td>null</td>
</tr>
<tr>
<td>5</td>
<td>é¢¨å‘‚</td>
<td>4</td>
</tr>
<tr>
<td>6</td>
<td>æµ´æ§½</td>
<td>5</td>
</tr>
<tr>
<td>7</td>
<td>æ›æ°—æ‰‡</td>
<td>5</td>
</tr>
<tr>
<td>8</td>
<td>æ´—é¢å°</td>
<td>4</td>
</tr>
<tr>
<td>9</td>
<td>èª­æ›¸</td>
<td>null</td>
</tr>
</tbody>
</table>
<h3>ã‚¿ã‚¹ã‚¯ã®å–å¾—</h3>
<p>ä¾‹ãˆã°<code>æƒé™¤</code>ã‚¿ã‚¹ã‚¯(id = 4)ã«ç´ã¥ãã‚¿ã‚¹ã‚¯ã®å–å¾—ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªã‚¯ã‚¨ãƒªã«ãªã‚‹</p>
<pre><code class="hljs language-sql"><span class="hljs-keyword">SELECT</span>
	<span class="hljs-operator">*</span>
<span class="hljs-keyword">FROM</span>
	tasks t1
	<span class="hljs-keyword">LEFT</span> <span class="hljs-keyword">OUTER</span> <span class="hljs-keyword">JOIN</span> tasks t2 <span class="hljs-keyword">ON</span> t1.id <span class="hljs-operator">=</span> t2.parent_id
	<span class="hljs-keyword">LEFT</span> <span class="hljs-keyword">OUTER</span> <span class="hljs-keyword">JOIN</span> tasks t3 <span class="hljs-keyword">ON</span> t2.id <span class="hljs-operator">=</span> t3.parent_id
<span class="hljs-keyword">WHERE</span>
	t1.id <span class="hljs-operator">=</span> <span class="hljs-number">4</span>;</code></pre>
<p>ã“ã®ã‚¯ã‚¨ãƒªã¯ã€ãã®ã‚¿ã‚¹ã‚¯ãŒæœ€å¤§ä½•éšå±¤ã‚ã‚‹ã®ã‹ã‚’äº‹å‰ã«çŸ¥ã£ã¦ãŠãå¿…è¦ãŒã‚ã‚‹ã€ã¨ã„ã†å•é¡ŒãŒã‚ã‚‹ã€‚å­ã‚¿ã‚¹ã‚¯ã®ãƒã‚¹ãƒˆã«åˆ¶é™ãŒãªã„å ´åˆã€ã“ã®ã‚¯ã‚¨ãƒªã¯ç¾å®Ÿçš„ã§ã¯ãªã„ã€‚ã¤ã¾ã‚Šã€1ã‚¯ã‚¨ãƒªã§å…¨å–å¾—ã¯ã§ããªã„ã€‚</p>
<p>äº‹å‰ã«ä½•éšå±¤ã‚ã‚‹ã‹ã‚’çŸ¥ã‚‰ãªã„å ´åˆã€<code>parent_id</code>ã«ãƒ’ãƒƒãƒˆã—ãŸãƒ¬ã‚³ãƒ¼ãƒ‰ã®idã‚’ã„ã‚Œã¦ãƒ’ãƒƒãƒˆã—ãªããªã‚‹ã¾ã§æ¤œç´¢ã—ã¦ã„ãæ–¹æ³•ã§å–å¾—ã§ãã‚‹ã€‚</p>
<pre><code class="hljs language-sql"><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> tasks <span class="hljs-keyword">where</span> parent_id <span class="hljs-operator">=</span> <span class="hljs-number">4</span>; <span class="hljs-comment">-- id 5, 8ãŒãƒ’ãƒƒãƒˆ</span>

<span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> tasks <span class="hljs-keyword">where</span> parent_id <span class="hljs-keyword">in</span> (<span class="hljs-number">5</span>, <span class="hljs-number">8</span>); <span class="hljs-comment">-- id 6, 7ãŒãƒ’ãƒƒãƒˆ</span>

<span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> tasks <span class="hljs-keyword">where</span> parent_id <span class="hljs-keyword">in</span> (<span class="hljs-number">6</span>, <span class="hljs-number">7</span>); <span class="hljs-comment">-- ãƒ’ãƒƒãƒˆãªã—</span></code></pre>
<p>ã“ã®æ–¹æ³•ã§ã¯ã€éšå±¤ãŒå¢—ãˆã‚Œã°å¢—ãˆã‚‹ã»ã©ã‚¯ã‚¨ãƒªå®Ÿè¡ŒãŒå¤šããªã£ã¦ã—ã¾ã†ã€‚</p>
<h3>ã‚¿ã‚¹ã‚¯ã®è¿½åŠ </h3>
<p>è¦ªã‚’æŒ‡å®šã—ã¦è¶³ã™ã ã‘ãªã®ã§ç‰¹ã«é¢å€’ãªãƒã‚¤ãƒ³ãƒˆã¯ãªã„ã€‚</p>
<p>è¦ªã‚¿ã‚¹ã‚¯ã®è¿½åŠ </p>
<pre><code class="hljs language-sql"><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> tasks (name, parent_id)
		<span class="hljs-keyword">values</span>("å‹‰å¼·", <span class="hljs-keyword">NULL</span>);</code></pre>
<p>å­ã‚¿ã‚¹ã‚¯ã®è¿½åŠ </p>
<pre><code class="hljs language-sql"><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> tasks (name, parent_id)
		<span class="hljs-keyword">values</span>("æ’æ°´æº", <span class="hljs-number">5</span>);</code></pre>
<h3>ã‚¿ã‚¹ã‚¯ã®æ›´æ–°</h3>
<p>è¦ªã‚¿ã‚¹ã‚¯ã‚’å¤‰æ›´ã™ã‚‹å ´åˆã€parent_idã‚’æ›¸ãæ›ãˆã‚‹ã ã‘ãªã®ã§é¢å€’ãƒã‚¤ãƒ³ãƒˆãªã—ã€‚</p>
<pre><code class="hljs language-sql">update tasks <span class="hljs-keyword">set</span> parent_id <span class="hljs-operator">=</span> <span class="hljs-number">4</span> <span class="hljs-keyword">where</span> id <span class="hljs-operator">=</span> <span class="hljs-number">11</span></code></pre>
<h3>ã‚¿ã‚¹ã‚¯ã®å‰Šé™¤</h3>
<p>å­ã‚’æŒã¤è¦ªã‚¿ã‚¹ã‚¯ã®å‰Šé™¤ã§ã€å­ã‚‚å«ã‚ã¦å‰Šé™¤ã™ã‚‹å ´åˆã‚’è€ƒãˆã‚‹ã€‚ãã®ã‚¿ã‚¹ã‚¯ãŒæŒã¤å­ã‚¿ã‚¹ã‚¯ã‚’çŸ¥ã‚‹å¿…è¦ãŒã‚ã‚‹ã®ã§ã€å–å¾—ã¨åŒæ§˜ã€ãƒ’ãƒƒãƒˆã—ãªããªã‚‹ã¾ã§æ¤œç´¢ã—ã¦å­ã‚¿ã‚¹ã‚¯ã®idã‚’èª¿ã¹ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚</p>
<pre><code class="hljs language-sql"><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> tasks <span class="hljs-keyword">where</span> parent_id <span class="hljs-operator">=</span> <span class="hljs-number">4</span>; <span class="hljs-comment">-- id 5, 8ãŒãƒ’ãƒƒãƒˆ</span>

<span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> tasks <span class="hljs-keyword">where</span> parent_id <span class="hljs-keyword">in</span> (<span class="hljs-number">5</span>, <span class="hljs-number">8</span>); <span class="hljs-comment">-- id 6, 7ãŒãƒ’ãƒƒãƒˆ</span>

<span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> tasks <span class="hljs-keyword">where</span> parent_id <span class="hljs-keyword">in</span> (<span class="hljs-number">6</span>, <span class="hljs-number">7</span>); <span class="hljs-comment">-- ãƒ’ãƒƒãƒˆãªã—</span>

<span class="hljs-keyword">delete</span> <span class="hljs-keyword">from</span> tasks <span class="hljs-keyword">where</span> id <span class="hljs-keyword">in</span> (<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">8</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>);</code></pre>
<p>ãŸã ã—ã€<code>parent_id</code>ã«å¤–éƒ¨ã‚­ãƒ¼åˆ¶ç´„ã§<code>ON DELETE CASCADE</code>ã‚’è¨­å®šã—ã¦ãŠã‘ã°ã€è¦ªã‚’æ¶ˆã—ãŸæ®µéšã§ã™ã¹ã¦æ¶ˆãˆã‚‹</p>
<pre><code class="hljs language-sql"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> tasks
	<span class="hljs-keyword">ADD</span> <span class="hljs-keyword">FOREIGN</span> KEY (`parent_id`) <span class="hljs-keyword">REFERENCES</span> tasks (`id`) <span class="hljs-keyword">ON</span> <span class="hljs-keyword">DELETE</span> CASCADE;

<span class="hljs-keyword">delete</span> <span class="hljs-keyword">from</span> tasks <span class="hljs-keyword">where</span> id <span class="hljs-operator">=</span> <span class="hljs-number">4</span>;</code></pre>
<h3>å†å¸°ã‚¯ã‚¨ãƒª</h3>
<p>å†å¸°ã‚¯ã‚¨ãƒªã‚’åˆ©ç”¨ã™ã‚Œã°ã€å–å¾—ã‚¯ã‚¨ãƒªã®æ•°ã¯æ¸›ã‚‹ã€‚è©³ç´°ã¯å¾Œæ—¥æ›¸ãã€‚</p>
<p><a href="http://interprism.hatenablog.com/entry/fetch-tree-by-recursive-query">å†å¸°ã‚¯ã‚¨ãƒªã§æœ¨æ§‹é€ ã®ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹</a></p>
<h2>çµŒè·¯åˆ—æŒ™</h2>
<p>rootã¾ã§ã®çµŒè·¯ã‚’<code>/</code>ãªã©ã®æ–‡å­—åˆ—ã§åŒºåˆ‡ã£ã¦ä¿æŒã™ã‚‹è¨­è¨ˆ</p>
<table>
<thead>
<tr>
<th>id</th>
<th>name</th>
<th>path</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>è²·ã„ç‰©</td>
<td>1</td>
</tr>
<tr>
<td>2</td>
<td>ã˜ã‚ƒãŒã„ã‚‚</td>
<td>1/2</td>
</tr>
<tr>
<td>3</td>
<td>ã«ã‚“ã˜ã‚“</td>
<td>1/3</td>
</tr>
<tr>
<td>4</td>
<td>æƒé™¤</td>
<td>4</td>
</tr>
<tr>
<td>5</td>
<td>é¢¨å‘‚</td>
<td>4/5</td>
</tr>
<tr>
<td>6</td>
<td>æµ´æ§½</td>
<td>4/5/6</td>
</tr>
<tr>
<td>7</td>
<td>æ›æ°—æ‰‡</td>
<td>4/5/7</td>
</tr>
<tr>
<td>8</td>
<td>æ´—é¢å°</td>
<td>4/8</td>
</tr>
<tr>
<td>9</td>
<td>èª­æ›¸</td>
<td>9</td>
</tr>
</tbody>
</table>
<h3>ã‚¿ã‚¹ã‚¯ã®å–å¾—</h3>
<p>ä¾‹ãˆã°<code>æƒé™¤</code>ã‚¿ã‚¹ã‚¯(id = 4)ã«ç´ã¥ãã‚¿ã‚¹ã‚¯ã®å–å¾—ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªã‚¯ã‚¨ãƒªã«ãªã‚‹</p>
<pre><code class="hljs language-sql"><span class="hljs-keyword">SELECT</span>
	<span class="hljs-operator">*</span>
<span class="hljs-keyword">FROM</span>
	tasks2
<span class="hljs-keyword">WHERE</span>
	`path` <span class="hljs-keyword">LIKE</span> <span class="hljs-string">'4'</span>
	<span class="hljs-keyword">OR</span> `path` <span class="hljs-keyword">LIKE</span> <span class="hljs-string">'4/%'</span></code></pre>
<h3>ã‚¿ã‚¹ã‚¯ã®è¿½åŠ </h3>
<p>è¦ªã‚¿ã‚¹ã‚¯ã®è¿½åŠ ã€‚<code>id</code>ãŒ<code>auto_increment</code>ã®å ´åˆã€ã¾ãšã¯pathãªã—ã§insertã—ã€æ¡ç•ªã•ã‚ŒãŸIDã‚’ç¢ºèªã—ã¦updateã‚’ã‹ã‘ã‚‹æ–¹æ³•ãŒè€ƒãˆã‚‰ã‚Œã‚‹ã€‚ï¼ˆä»–ã«ãªã«ã‹ã„ã„æ„Ÿã˜ã«ã‚„ã‚Œã‚‹æ–¹æ³•ã‚ã‚‹ã‚“ã ã‚ã†ã‹ï¼Ÿï¼‰</p>
<pre><code class="hljs language-sql"><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> tasks2 (`name`)
		<span class="hljs-keyword">VALUES</span>("è¦ªã‚¿ã‚¹ã‚¯"); <span class="hljs-comment">-- id 10ãŒæ¡ç•ªã•ã‚ŒãŸ</span>
UPDATE tasks2 <span class="hljs-keyword">SET</span> `path` <span class="hljs-operator">=</span> <span class="hljs-string">'10'</span> <span class="hljs-keyword">WHERE</span> id <span class="hljs-operator">=</span> <span class="hljs-number">10</span>;</code></pre>
<p>å­ã‚¿ã‚¹ã‚¯è¿½åŠ ã¯ã€è¦ªã«ãªã‚‹ã‚¿ã‚¹ã‚¯ã®<code>path</code>ã«è‡ªåˆ†ã®idã‚’è¿½åŠ ã—ã¦ä¿å­˜ã™ã‚Œã°è‰¯ã„ã€‚ã‚¯ã‚¨ãƒªã¯â†‘ã¨åŒæ§˜ã€‚</p>
<h3>ã‚¿ã‚¹ã‚¯ã®å‰Šé™¤</h3>
<p>è¦ªã¨ãã‚Œã«é–¢é€£ã™ã‚‹å­ã™ã¹ã¦ã‚’å‰Šé™¤ã™ã‚‹å ´åˆã‚’è€ƒãˆã‚‹ã€‚</p>
<pre><code class="hljs language-sql"><span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> tasks2
<span class="hljs-keyword">WHERE</span> `path` <span class="hljs-operator">=</span> <span class="hljs-string">'4'</span>
	<span class="hljs-keyword">OR</span> `path` <span class="hljs-keyword">LIKE</span> <span class="hljs-string">'4/%'</span></code></pre>
<p>æ‰‹è»½ã«æ¶ˆã›ã‚‹ã€‚</p>
<h2>é–‰åŒ…ãƒ†ãƒ¼ãƒ–ãƒ«</h2>
<p>è¦ªå­é–¢ä¿‚ã‚’å°‚ç”¨ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã§ç®¡ç†ã™ã‚‹è¨­è¨ˆã€‚å…·ä½“çš„ã«ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ãªã‚¿ã‚¹ã‚¯ãŒã‚ã‚‹ã¨ã</p>
<table>
<thead>
<tr>
<th>id</th>
<th>name</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>è²·ã„ç‰©</td>
</tr>
<tr>
<td>2</td>
<td>ã˜ã‚ƒãŒã„ã‚‚</td>
</tr>
<tr>
<td>3</td>
<td>ã«ã‚“ã˜ã‚“</td>
</tr>
<tr>
<td>4</td>
<td>æƒé™¤</td>
</tr>
<tr>
<td>5</td>
<td>é¢¨å‘‚</td>
</tr>
<tr>
<td>6</td>
<td>æµ´æ§½</td>
</tr>
<tr>
<td>7</td>
<td>æ›æ°—æ‰‡</td>
</tr>
<tr>
<td>8</td>
<td>æ´—é¢å°</td>
</tr>
<tr>
<td>9</td>
<td>èª­æ›¸</td>
</tr>
</tbody>
</table>
<p>è¦ªå­é–¢ä¿‚å…¨ãƒ‘ã‚¿ãƒ¼ãƒ³(ç›´æ¥ã®è¦ªå­ã ã‘ã§ã¯ãªã„)ã‚’ç®¡ç†ã™ã‚‹ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ç”¨æ„ã™ã‚‹ã€‚</p>
<table>
<thead>
<tr>
<th>parent_id</th>
<th>child_id</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>1</td>
<td>2</td>
</tr>
<tr>
<td>1</td>
<td>3</td>
</tr>
<tr>
<td>4</td>
<td>4</td>
</tr>
<tr>
<td>4</td>
<td>5</td>
</tr>
<tr>
<td>4</td>
<td>6</td>
</tr>
<tr>
<td>4</td>
<td>7</td>
</tr>
<tr>
<td>4</td>
<td>8</td>
</tr>
<tr>
<td>5</td>
<td>5</td>
</tr>
<tr>
<td>5</td>
<td>6</td>
</tr>
<tr>
<td>5</td>
<td>7</td>
</tr>
<tr>
<td>6</td>
<td>6</td>
</tr>
<tr>
<td>7</td>
<td>7</td>
</tr>
<tr>
<td>8</td>
<td>8</td>
</tr>
<tr>
<td>9</td>
<td>9</td>
</tr>
</tbody>
</table>
<h3>ã‚¿ã‚¹ã‚¯ã®å–å¾—</h3>
<p><code>æƒé™¤</code>ã‚¿ã‚¹ã‚¯(id = 4)ã«ç´ã¥ãã‚¿ã‚¹ã‚¯ã®å–å¾—</p>
<pre><code class="hljs language-sql"><span class="hljs-keyword">SELECT</span>
	<span class="hljs-operator">*</span>
<span class="hljs-keyword">FROM</span>
	tasks3 <span class="hljs-keyword">AS</span> t
	<span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> task_hierarchie <span class="hljs-keyword">AS</span> h <span class="hljs-keyword">ON</span> t.id <span class="hljs-operator">=</span> h.child_id
<span class="hljs-keyword">WHERE</span>
	h.parent_id <span class="hljs-operator">=</span> <span class="hljs-number">4</span>;</code></pre>
<p>é–‰åŒ…ãƒ†ãƒ¼ãƒ–ãƒ«(<code>task_hierarchie</code>)ã®<code>parent_id</code>=4ã‚’æ¢ã™ã ã‘ã§ã„ã„ã€‚</p>
<h3>ã‚¿ã‚¹ã‚¯è¿½åŠ </h3>
<p>ä¸€ç•ªä¸Šã®éšå±¤ã«ã‚¿ã‚¹ã‚¯ã‚’è¶³ã™å ´åˆ</p>
<pre><code class="hljs language-sql"><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> tasks (`name`)
		<span class="hljs-keyword">VALUES</span>("æ•£æ­©");
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> task_hierarchie
		<span class="hljs-keyword">VALUES</span>(<span class="hljs-number">10</span>, <span class="hljs-number">10</span>);</code></pre>
<p>å­ã‚¿ã‚¹ã‚¯ã®è¿½åŠ ã€‚å­ã‚¿ã‚¹ã‚¯è‡ªèº«ã®idã¨ã€å­ã‚’è¶³ã™å¯¾è±¡ã®è¦ªå…¨ã¦ã«å­ã®idã‚’è¶³ã™ã€‚ä¾‹ãˆã°ã€æƒé™¤/é¢¨å‘‚(id=5)ã®å­ã«æ’æ°´æºã‚’è¶³ã™å ´åˆã€è¦ªã§ã‚ã‚‹ã€æƒé™¤(id=4)ã¨é¢¨å‘‚(id=5)ãã‚Œãã‚Œã«æ’æ°´æºã®idã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’è¿½åŠ ã™ã‚‹ã€‚ã¾ãŸ</p>
<p>å¯¾è±¡ã®ã™ã¹ã¦ã®è¦ªã‚’æ¢ã™ã¨ãã€<code>task_hierarchie</code>ã®<code>child_id</code>ãŒå¯¾è±¡idã¨ä¸€è‡´ã®æ¡ä»¶ã§æ¤œç´¢ã™ã‚Œã°ã‚ˆã„ã€‚</p>
<pre><code class="hljs language-sql"><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> tasks (`name`)
		<span class="hljs-keyword">VALUES</span>("æ’æ°´æº"); <span class="hljs-comment">-- id=10</span>

<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> task_hierarchie
<span class="hljs-keyword">SELECT</span>
	h.parent_id,
	<span class="hljs-number">10</span>
<span class="hljs-keyword">FROM</span>
	task_hierarchie <span class="hljs-keyword">AS</span> h
<span class="hljs-keyword">WHERE</span>
	h.child_id <span class="hljs-operator">=</span> <span class="hljs-number">5</span>
<span class="hljs-keyword">UNION</span> <span class="hljs-keyword">ALL</span>
<span class="hljs-keyword">SELECT</span>
	<span class="hljs-number">10</span>,
	<span class="hljs-number">10</span>;</code></pre>
<h3>ã‚¿ã‚¹ã‚¯å‰Šé™¤</h3>
<p>æƒé™¤ã‚¿ã‚¹ã‚¯(id=4)ã‚’å‰Šé™¤ã™ã‚‹å ´åˆ</p>
<pre><code class="hljs language-sql"><span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> tasks3
<span class="hljs-keyword">WHERE</span> id <span class="hljs-keyword">IN</span>(
		<span class="hljs-keyword">SELECT</span>
			child_id <span class="hljs-keyword">FROM</span> task_hierarchie
		<span class="hljs-keyword">WHERE</span>
			parent_id <span class="hljs-operator">=</span> <span class="hljs-number">4</span>);

<span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> task_hierarchie
<span class="hljs-keyword">WHERE</span> parent_id <span class="hljs-operator">=</span> <span class="hljs-number">4</span>;</code></pre>
<h2>å…¥ã‚Œå­é›†åˆ</h2>
<p>å¾Œã§æ›¸ãã¾ã™ã€‚</p>
<p><a href="https://mickindex.sakura.ne.jp/database/db_tree_ns.html">SQLã§æœ¨ã¨éšå±¤æ§‹é€ ã®ãƒ‡ãƒ¼ã‚¿ã‚’æ‰±ã†ï¼ˆï¼‘ï¼‰â€•â€• å…¥ã‚Œå­é›†åˆãƒ¢ãƒ‡ãƒ«</a></p>
<h2>ã¾ã¨ã‚</h2>
<p>éš£æ¥ãƒªã‚¹ãƒˆã¯ã€éšå±¤ä¸Šé™ãŒã‚ã‚‹ã€ã‹ã¤æ·±ããªã‚‰ãªã„å ´åˆã«ãŠã„ã¦åˆ©ç”¨ã§ãã‚‹ã€‚ãŒã€ã—ã‹ã—ä¸Šé™ã‚’æ·±ãã—ãŸããªã£ãŸã¨ãã«ã‚­ãƒ„ã‚¤ã€‚</p>
<p>çµŒè·¯åˆ—æŒ™ã¯çµŒè·¯ãŒæ–‡å­—åˆ—ã§ã€æ­£ã—ããªã„ãƒ‘ã‚¹ãŒinsertã•ã‚Œã¦ã—ã¾ã†å¯èƒ½æ€§ã‚’è€ƒãˆã‚‹ã¨ã‚­ãƒ„ã‚¤ã€‚ã¾ãŸã€auto_incrementã®ã¨ãä¸€åº¦insertã—ã¦idã‚’ç¢ºèªã—ã¦updateã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã®ã‚‚é¢å€’ã€‚</p>
<p>é–‰åŒ…ãƒ†ãƒ¼ãƒ–ãƒ«ã¯ãƒ‡ãƒ¼ã‚¿é‡ãŒå¤šããªã£ã¦ã—ã¾ã„ãŒã¡ã ãŒã€æ‰‹é–“ãªãå„ç¨®æ“ä½œãŒã§ãã‚‹ã®ã§æœ‰ç”¨ã«æ„Ÿã˜ãŸã€‚</p>
<p>å€‹äººçš„ã«ä½œæˆã—ã¦ã„ã‚‹ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§éšå±¤æ§‹é€ ã‚’è€ƒãˆã‚‹å¿…è¦ãŒã‚ã‚Šã€èª¿ã¹ã¦ã¿ãŸã€‚è¦ä»¶ã¨ã—ã¦ä¸Šé™ãŒæ±ºã¾ã£ã¦ã„ã‚‹ã€ã‹ã¤æµ…ã„ã®ã§éš£æ¥ãƒªã‚¹ãƒˆã‹é–‰åŒ…ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’åˆ©ç”¨ã™ã‚‹ã®ãŒå¦¥å½“ã¨åˆ¤æ–­ã€‚ä½¿ã„å‹æ‰‹ã¨ä»Šå¾Œä¸Šé™ã‚’ãªãã—ã¦ã‚‚å•é¡Œãªã„ã“ã¨ã‹ã‚‰ã€æœ€çµ‚çš„ã«ã¯é–‰åŒ…ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’é¸æŠã—ãŸã€‚</p>
</div></article></main></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"date":"2021å¹´03æœˆ21æ—¥","title":"RDBã§éšå±¤æ§‹é€ ã‚’ã‚ã¤ã‹ã†","content":"\u003cp\u003eä¾‹ãˆã°TODOã‚¢ãƒ—ãƒªã«ãŠã„ã¦ã€è¦ªã‚¿ã‚¹ã‚¯ã€å­ã‚¿ã‚¹ã‚¯ã€å­«ã‚¿ã‚¹ã‚¯...ã®ã‚ˆã†ã«ã‚¿ã‚¹ã‚¯ã‚’ä½œæˆã§ãã‚‹æ©Ÿèƒ½ãŒã‚ã£ãŸã¨ã—ã¦ã€ãã®é–¢ä¿‚æ€§ã‚’ã©ã†DBã«ä¿å­˜ã™ã‚‹ã®ã‹ã€ã‚ã‹ã‚‰ãªã‹ã£ãŸã®ã§èª¿ã¹ãŸã€‚\u003c/p\u003e\n\u003cp\u003eã‚ˆãçŸ¥ã‚‰ã‚Œã¦ã„ã‚‹æ‰‹æ³•ã¨ã—ã¦ã¯ä»¥ä¸‹ã®ï¼”ã¤ãŒã‚ã‚‹\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eéš£æ¥ãƒªã‚¹ãƒˆ\u003c/li\u003e\n\u003cli\u003eçµŒè·¯åˆ—æŒ™\u003c/li\u003e\n\u003cli\u003eé–‰åŒ…ãƒ†ãƒ¼ãƒ–ãƒ«\u003c/li\u003e\n\u003cli\u003eå…¥ã‚Œå­é›†åˆ\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eãã‚Œãã‚Œã®æ‰‹æ³•ã«ãŠã„ã¦ã€ã‚¿ã‚¹ã‚¯ã®å–å¾—ã€è¿½åŠ ã€å‰Šé™¤ãŒã©ã†ã„ã†ã‚¯ã‚¨ãƒªã«ãªã‚‹ã®ã‹è¦‹ã¦ã„ãã€‚\u003c/p\u003e\n\u003ch2\u003eéš£æ¥ãƒªã‚¹ãƒˆ\u003c/h2\u003e\n\u003cp\u003eè‡ªåˆ†ã®è¦ªã‚¿ã‚¹ã‚¯ã®IDã‚’ä¿æŒã™ã‚‹è¨­è¨ˆ\u003c/p\u003e\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003eid\u003c/th\u003e\n\u003cth\u003ename\u003c/th\u003e\n\u003cth\u003eparent_id\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd\u003e1\u003c/td\u003e\n\u003ctd\u003eè²·ã„ç‰©\u003c/td\u003e\n\u003ctd\u003enull\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e2\u003c/td\u003e\n\u003ctd\u003eã˜ã‚ƒãŒã„ã‚‚\u003c/td\u003e\n\u003ctd\u003e1\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e3\u003c/td\u003e\n\u003ctd\u003eã«ã‚“ã˜ã‚“\u003c/td\u003e\n\u003ctd\u003e1\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e4\u003c/td\u003e\n\u003ctd\u003eæƒé™¤\u003c/td\u003e\n\u003ctd\u003enull\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e5\u003c/td\u003e\n\u003ctd\u003eé¢¨å‘‚\u003c/td\u003e\n\u003ctd\u003e4\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e6\u003c/td\u003e\n\u003ctd\u003eæµ´æ§½\u003c/td\u003e\n\u003ctd\u003e5\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e7\u003c/td\u003e\n\u003ctd\u003eæ›æ°—æ‰‡\u003c/td\u003e\n\u003ctd\u003e5\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e8\u003c/td\u003e\n\u003ctd\u003eæ´—é¢å°\u003c/td\u003e\n\u003ctd\u003e4\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e9\u003c/td\u003e\n\u003ctd\u003eèª­æ›¸\u003c/td\u003e\n\u003ctd\u003enull\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\u003ch3\u003eã‚¿ã‚¹ã‚¯ã®å–å¾—\u003c/h3\u003e\n\u003cp\u003eä¾‹ãˆã°\u003ccode\u003eæƒé™¤\u003c/code\u003eã‚¿ã‚¹ã‚¯(id = 4)ã«ç´ã¥ãã‚¿ã‚¹ã‚¯ã®å–å¾—ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªã‚¯ã‚¨ãƒªã«ãªã‚‹\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-sql\"\u003e\u003cspan class=\"hljs-keyword\"\u003eSELECT\u003c/span\u003e\n\t\u003cspan class=\"hljs-operator\"\u003e*\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eFROM\u003c/span\u003e\n\ttasks t1\n\t\u003cspan class=\"hljs-keyword\"\u003eLEFT\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eOUTER\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eJOIN\u003c/span\u003e tasks t2 \u003cspan class=\"hljs-keyword\"\u003eON\u003c/span\u003e t1.id \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e t2.parent_id\n\t\u003cspan class=\"hljs-keyword\"\u003eLEFT\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eOUTER\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eJOIN\u003c/span\u003e tasks t3 \u003cspan class=\"hljs-keyword\"\u003eON\u003c/span\u003e t2.id \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e t3.parent_id\n\u003cspan class=\"hljs-keyword\"\u003eWHERE\u003c/span\u003e\n\tt1.id \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e;\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eã“ã®ã‚¯ã‚¨ãƒªã¯ã€ãã®ã‚¿ã‚¹ã‚¯ãŒæœ€å¤§ä½•éšå±¤ã‚ã‚‹ã®ã‹ã‚’äº‹å‰ã«çŸ¥ã£ã¦ãŠãå¿…è¦ãŒã‚ã‚‹ã€ã¨ã„ã†å•é¡ŒãŒã‚ã‚‹ã€‚å­ã‚¿ã‚¹ã‚¯ã®ãƒã‚¹ãƒˆã«åˆ¶é™ãŒãªã„å ´åˆã€ã“ã®ã‚¯ã‚¨ãƒªã¯ç¾å®Ÿçš„ã§ã¯ãªã„ã€‚ã¤ã¾ã‚Šã€1ã‚¯ã‚¨ãƒªã§å…¨å–å¾—ã¯ã§ããªã„ã€‚\u003c/p\u003e\n\u003cp\u003eäº‹å‰ã«ä½•éšå±¤ã‚ã‚‹ã‹ã‚’çŸ¥ã‚‰ãªã„å ´åˆã€\u003ccode\u003eparent_id\u003c/code\u003eã«ãƒ’ãƒƒãƒˆã—ãŸãƒ¬ã‚³ãƒ¼ãƒ‰ã®idã‚’ã„ã‚Œã¦ãƒ’ãƒƒãƒˆã—ãªããªã‚‹ã¾ã§æ¤œç´¢ã—ã¦ã„ãæ–¹æ³•ã§å–å¾—ã§ãã‚‹ã€‚\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-sql\"\u003e\u003cspan class=\"hljs-keyword\"\u003eselect\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e*\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e tasks \u003cspan class=\"hljs-keyword\"\u003ewhere\u003c/span\u003e parent_id \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e; \u003cspan class=\"hljs-comment\"\u003e-- id 5, 8ãŒãƒ’ãƒƒãƒˆ\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003eselect\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e*\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e tasks \u003cspan class=\"hljs-keyword\"\u003ewhere\u003c/span\u003e parent_id \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e (\u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e8\u003c/span\u003e); \u003cspan class=\"hljs-comment\"\u003e-- id 6, 7ãŒãƒ’ãƒƒãƒˆ\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003eselect\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e*\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e tasks \u003cspan class=\"hljs-keyword\"\u003ewhere\u003c/span\u003e parent_id \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e (\u003cspan class=\"hljs-number\"\u003e6\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e7\u003c/span\u003e); \u003cspan class=\"hljs-comment\"\u003e-- ãƒ’ãƒƒãƒˆãªã—\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eã“ã®æ–¹æ³•ã§ã¯ã€éšå±¤ãŒå¢—ãˆã‚Œã°å¢—ãˆã‚‹ã»ã©ã‚¯ã‚¨ãƒªå®Ÿè¡ŒãŒå¤šããªã£ã¦ã—ã¾ã†ã€‚\u003c/p\u003e\n\u003ch3\u003eã‚¿ã‚¹ã‚¯ã®è¿½åŠ \u003c/h3\u003e\n\u003cp\u003eè¦ªã‚’æŒ‡å®šã—ã¦è¶³ã™ã ã‘ãªã®ã§ç‰¹ã«é¢å€’ãªãƒã‚¤ãƒ³ãƒˆã¯ãªã„ã€‚\u003c/p\u003e\n\u003cp\u003eè¦ªã‚¿ã‚¹ã‚¯ã®è¿½åŠ \u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-sql\"\u003e\u003cspan class=\"hljs-keyword\"\u003einsert\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003einto\u003c/span\u003e tasks (name, parent_id)\n\t\t\u003cspan class=\"hljs-keyword\"\u003evalues\u003c/span\u003e(\"å‹‰å¼·\", \u003cspan class=\"hljs-keyword\"\u003eNULL\u003c/span\u003e);\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eå­ã‚¿ã‚¹ã‚¯ã®è¿½åŠ \u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-sql\"\u003e\u003cspan class=\"hljs-keyword\"\u003einsert\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003einto\u003c/span\u003e tasks (name, parent_id)\n\t\t\u003cspan class=\"hljs-keyword\"\u003evalues\u003c/span\u003e(\"æ’æ°´æº\", \u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e);\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003eã‚¿ã‚¹ã‚¯ã®æ›´æ–°\u003c/h3\u003e\n\u003cp\u003eè¦ªã‚¿ã‚¹ã‚¯ã‚’å¤‰æ›´ã™ã‚‹å ´åˆã€parent_idã‚’æ›¸ãæ›ãˆã‚‹ã ã‘ãªã®ã§é¢å€’ãƒã‚¤ãƒ³ãƒˆãªã—ã€‚\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-sql\"\u003eupdate tasks \u003cspan class=\"hljs-keyword\"\u003eset\u003c/span\u003e parent_id \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003ewhere\u003c/span\u003e id \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e11\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003eã‚¿ã‚¹ã‚¯ã®å‰Šé™¤\u003c/h3\u003e\n\u003cp\u003eå­ã‚’æŒã¤è¦ªã‚¿ã‚¹ã‚¯ã®å‰Šé™¤ã§ã€å­ã‚‚å«ã‚ã¦å‰Šé™¤ã™ã‚‹å ´åˆã‚’è€ƒãˆã‚‹ã€‚ãã®ã‚¿ã‚¹ã‚¯ãŒæŒã¤å­ã‚¿ã‚¹ã‚¯ã‚’çŸ¥ã‚‹å¿…è¦ãŒã‚ã‚‹ã®ã§ã€å–å¾—ã¨åŒæ§˜ã€ãƒ’ãƒƒãƒˆã—ãªããªã‚‹ã¾ã§æ¤œç´¢ã—ã¦å­ã‚¿ã‚¹ã‚¯ã®idã‚’èª¿ã¹ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-sql\"\u003e\u003cspan class=\"hljs-keyword\"\u003eselect\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e*\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e tasks \u003cspan class=\"hljs-keyword\"\u003ewhere\u003c/span\u003e parent_id \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e; \u003cspan class=\"hljs-comment\"\u003e-- id 5, 8ãŒãƒ’ãƒƒãƒˆ\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003eselect\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e*\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e tasks \u003cspan class=\"hljs-keyword\"\u003ewhere\u003c/span\u003e parent_id \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e (\u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e8\u003c/span\u003e); \u003cspan class=\"hljs-comment\"\u003e-- id 6, 7ãŒãƒ’ãƒƒãƒˆ\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003eselect\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e*\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e tasks \u003cspan class=\"hljs-keyword\"\u003ewhere\u003c/span\u003e parent_id \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e (\u003cspan class=\"hljs-number\"\u003e6\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e7\u003c/span\u003e); \u003cspan class=\"hljs-comment\"\u003e-- ãƒ’ãƒƒãƒˆãªã—\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003edelete\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e tasks \u003cspan class=\"hljs-keyword\"\u003ewhere\u003c/span\u003e id \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e (\u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e8\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e6\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e7\u003c/span\u003e);\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eãŸã ã—ã€\u003ccode\u003eparent_id\u003c/code\u003eã«å¤–éƒ¨ã‚­ãƒ¼åˆ¶ç´„ã§\u003ccode\u003eON DELETE CASCADE\u003c/code\u003eã‚’è¨­å®šã—ã¦ãŠã‘ã°ã€è¦ªã‚’æ¶ˆã—ãŸæ®µéšã§ã™ã¹ã¦æ¶ˆãˆã‚‹\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-sql\"\u003e\u003cspan class=\"hljs-keyword\"\u003eALTER\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eTABLE\u003c/span\u003e tasks\n\t\u003cspan class=\"hljs-keyword\"\u003eADD\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eFOREIGN\u003c/span\u003e KEY (`parent_id`) \u003cspan class=\"hljs-keyword\"\u003eREFERENCES\u003c/span\u003e tasks (`id`) \u003cspan class=\"hljs-keyword\"\u003eON\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eDELETE\u003c/span\u003e CASCADE;\n\n\u003cspan class=\"hljs-keyword\"\u003edelete\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e tasks \u003cspan class=\"hljs-keyword\"\u003ewhere\u003c/span\u003e id \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e;\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003eå†å¸°ã‚¯ã‚¨ãƒª\u003c/h3\u003e\n\u003cp\u003eå†å¸°ã‚¯ã‚¨ãƒªã‚’åˆ©ç”¨ã™ã‚Œã°ã€å–å¾—ã‚¯ã‚¨ãƒªã®æ•°ã¯æ¸›ã‚‹ã€‚è©³ç´°ã¯å¾Œæ—¥æ›¸ãã€‚\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"http://interprism.hatenablog.com/entry/fetch-tree-by-recursive-query\"\u003eå†å¸°ã‚¯ã‚¨ãƒªã§æœ¨æ§‹é€ ã®ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹\u003c/a\u003e\u003c/p\u003e\n\u003ch2\u003eçµŒè·¯åˆ—æŒ™\u003c/h2\u003e\n\u003cp\u003erootã¾ã§ã®çµŒè·¯ã‚’\u003ccode\u003e/\u003c/code\u003eãªã©ã®æ–‡å­—åˆ—ã§åŒºåˆ‡ã£ã¦ä¿æŒã™ã‚‹è¨­è¨ˆ\u003c/p\u003e\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003eid\u003c/th\u003e\n\u003cth\u003ename\u003c/th\u003e\n\u003cth\u003epath\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd\u003e1\u003c/td\u003e\n\u003ctd\u003eè²·ã„ç‰©\u003c/td\u003e\n\u003ctd\u003e1\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e2\u003c/td\u003e\n\u003ctd\u003eã˜ã‚ƒãŒã„ã‚‚\u003c/td\u003e\n\u003ctd\u003e1/2\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e3\u003c/td\u003e\n\u003ctd\u003eã«ã‚“ã˜ã‚“\u003c/td\u003e\n\u003ctd\u003e1/3\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e4\u003c/td\u003e\n\u003ctd\u003eæƒé™¤\u003c/td\u003e\n\u003ctd\u003e4\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e5\u003c/td\u003e\n\u003ctd\u003eé¢¨å‘‚\u003c/td\u003e\n\u003ctd\u003e4/5\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e6\u003c/td\u003e\n\u003ctd\u003eæµ´æ§½\u003c/td\u003e\n\u003ctd\u003e4/5/6\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e7\u003c/td\u003e\n\u003ctd\u003eæ›æ°—æ‰‡\u003c/td\u003e\n\u003ctd\u003e4/5/7\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e8\u003c/td\u003e\n\u003ctd\u003eæ´—é¢å°\u003c/td\u003e\n\u003ctd\u003e4/8\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e9\u003c/td\u003e\n\u003ctd\u003eèª­æ›¸\u003c/td\u003e\n\u003ctd\u003e9\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\u003ch3\u003eã‚¿ã‚¹ã‚¯ã®å–å¾—\u003c/h3\u003e\n\u003cp\u003eä¾‹ãˆã°\u003ccode\u003eæƒé™¤\u003c/code\u003eã‚¿ã‚¹ã‚¯(id = 4)ã«ç´ã¥ãã‚¿ã‚¹ã‚¯ã®å–å¾—ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªã‚¯ã‚¨ãƒªã«ãªã‚‹\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-sql\"\u003e\u003cspan class=\"hljs-keyword\"\u003eSELECT\u003c/span\u003e\n\t\u003cspan class=\"hljs-operator\"\u003e*\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eFROM\u003c/span\u003e\n\ttasks2\n\u003cspan class=\"hljs-keyword\"\u003eWHERE\u003c/span\u003e\n\t`path` \u003cspan class=\"hljs-keyword\"\u003eLIKE\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'4'\u003c/span\u003e\n\t\u003cspan class=\"hljs-keyword\"\u003eOR\u003c/span\u003e `path` \u003cspan class=\"hljs-keyword\"\u003eLIKE\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'4/%'\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003eã‚¿ã‚¹ã‚¯ã®è¿½åŠ \u003c/h3\u003e\n\u003cp\u003eè¦ªã‚¿ã‚¹ã‚¯ã®è¿½åŠ ã€‚\u003ccode\u003eid\u003c/code\u003eãŒ\u003ccode\u003eauto_increment\u003c/code\u003eã®å ´åˆã€ã¾ãšã¯pathãªã—ã§insertã—ã€æ¡ç•ªã•ã‚ŒãŸIDã‚’ç¢ºèªã—ã¦updateã‚’ã‹ã‘ã‚‹æ–¹æ³•ãŒè€ƒãˆã‚‰ã‚Œã‚‹ã€‚ï¼ˆä»–ã«ãªã«ã‹ã„ã„æ„Ÿã˜ã«ã‚„ã‚Œã‚‹æ–¹æ³•ã‚ã‚‹ã‚“ã ã‚ã†ã‹ï¼Ÿï¼‰\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-sql\"\u003e\u003cspan class=\"hljs-keyword\"\u003eINSERT\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eINTO\u003c/span\u003e tasks2 (`name`)\n\t\t\u003cspan class=\"hljs-keyword\"\u003eVALUES\u003c/span\u003e(\"è¦ªã‚¿ã‚¹ã‚¯\"); \u003cspan class=\"hljs-comment\"\u003e-- id 10ãŒæ¡ç•ªã•ã‚ŒãŸ\u003c/span\u003e\nUPDATE tasks2 \u003cspan class=\"hljs-keyword\"\u003eSET\u003c/span\u003e `path` \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'10'\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eWHERE\u003c/span\u003e id \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e;\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eå­ã‚¿ã‚¹ã‚¯è¿½åŠ ã¯ã€è¦ªã«ãªã‚‹ã‚¿ã‚¹ã‚¯ã®\u003ccode\u003epath\u003c/code\u003eã«è‡ªåˆ†ã®idã‚’è¿½åŠ ã—ã¦ä¿å­˜ã™ã‚Œã°è‰¯ã„ã€‚ã‚¯ã‚¨ãƒªã¯â†‘ã¨åŒæ§˜ã€‚\u003c/p\u003e\n\u003ch3\u003eã‚¿ã‚¹ã‚¯ã®å‰Šé™¤\u003c/h3\u003e\n\u003cp\u003eè¦ªã¨ãã‚Œã«é–¢é€£ã™ã‚‹å­ã™ã¹ã¦ã‚’å‰Šé™¤ã™ã‚‹å ´åˆã‚’è€ƒãˆã‚‹ã€‚\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-sql\"\u003e\u003cspan class=\"hljs-keyword\"\u003eDELETE\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eFROM\u003c/span\u003e tasks2\n\u003cspan class=\"hljs-keyword\"\u003eWHERE\u003c/span\u003e `path` \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'4'\u003c/span\u003e\n\t\u003cspan class=\"hljs-keyword\"\u003eOR\u003c/span\u003e `path` \u003cspan class=\"hljs-keyword\"\u003eLIKE\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'4/%'\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eæ‰‹è»½ã«æ¶ˆã›ã‚‹ã€‚\u003c/p\u003e\n\u003ch2\u003eé–‰åŒ…ãƒ†ãƒ¼ãƒ–ãƒ«\u003c/h2\u003e\n\u003cp\u003eè¦ªå­é–¢ä¿‚ã‚’å°‚ç”¨ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã§ç®¡ç†ã™ã‚‹è¨­è¨ˆã€‚å…·ä½“çš„ã«ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ãªã‚¿ã‚¹ã‚¯ãŒã‚ã‚‹ã¨ã\u003c/p\u003e\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003eid\u003c/th\u003e\n\u003cth\u003ename\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd\u003e1\u003c/td\u003e\n\u003ctd\u003eè²·ã„ç‰©\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e2\u003c/td\u003e\n\u003ctd\u003eã˜ã‚ƒãŒã„ã‚‚\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e3\u003c/td\u003e\n\u003ctd\u003eã«ã‚“ã˜ã‚“\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e4\u003c/td\u003e\n\u003ctd\u003eæƒé™¤\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e5\u003c/td\u003e\n\u003ctd\u003eé¢¨å‘‚\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e6\u003c/td\u003e\n\u003ctd\u003eæµ´æ§½\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e7\u003c/td\u003e\n\u003ctd\u003eæ›æ°—æ‰‡\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e8\u003c/td\u003e\n\u003ctd\u003eæ´—é¢å°\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e9\u003c/td\u003e\n\u003ctd\u003eèª­æ›¸\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\u003cp\u003eè¦ªå­é–¢ä¿‚å…¨ãƒ‘ã‚¿ãƒ¼ãƒ³(ç›´æ¥ã®è¦ªå­ã ã‘ã§ã¯ãªã„)ã‚’ç®¡ç†ã™ã‚‹ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ç”¨æ„ã™ã‚‹ã€‚\u003c/p\u003e\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003eparent_id\u003c/th\u003e\n\u003cth\u003echild_id\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd\u003e1\u003c/td\u003e\n\u003ctd\u003e1\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e1\u003c/td\u003e\n\u003ctd\u003e2\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e1\u003c/td\u003e\n\u003ctd\u003e3\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e4\u003c/td\u003e\n\u003ctd\u003e4\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e4\u003c/td\u003e\n\u003ctd\u003e5\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e4\u003c/td\u003e\n\u003ctd\u003e6\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e4\u003c/td\u003e\n\u003ctd\u003e7\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e4\u003c/td\u003e\n\u003ctd\u003e8\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e5\u003c/td\u003e\n\u003ctd\u003e5\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e5\u003c/td\u003e\n\u003ctd\u003e6\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e5\u003c/td\u003e\n\u003ctd\u003e7\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e6\u003c/td\u003e\n\u003ctd\u003e6\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e7\u003c/td\u003e\n\u003ctd\u003e7\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e8\u003c/td\u003e\n\u003ctd\u003e8\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e9\u003c/td\u003e\n\u003ctd\u003e9\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\u003ch3\u003eã‚¿ã‚¹ã‚¯ã®å–å¾—\u003c/h3\u003e\n\u003cp\u003e\u003ccode\u003eæƒé™¤\u003c/code\u003eã‚¿ã‚¹ã‚¯(id = 4)ã«ç´ã¥ãã‚¿ã‚¹ã‚¯ã®å–å¾—\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-sql\"\u003e\u003cspan class=\"hljs-keyword\"\u003eSELECT\u003c/span\u003e\n\t\u003cspan class=\"hljs-operator\"\u003e*\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eFROM\u003c/span\u003e\n\ttasks3 \u003cspan class=\"hljs-keyword\"\u003eAS\u003c/span\u003e t\n\t\u003cspan class=\"hljs-keyword\"\u003eINNER\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eJOIN\u003c/span\u003e task_hierarchie \u003cspan class=\"hljs-keyword\"\u003eAS\u003c/span\u003e h \u003cspan class=\"hljs-keyword\"\u003eON\u003c/span\u003e t.id \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e h.child_id\n\u003cspan class=\"hljs-keyword\"\u003eWHERE\u003c/span\u003e\n\th.parent_id \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e;\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eé–‰åŒ…ãƒ†ãƒ¼ãƒ–ãƒ«(\u003ccode\u003etask_hierarchie\u003c/code\u003e)ã®\u003ccode\u003eparent_id\u003c/code\u003e=4ã‚’æ¢ã™ã ã‘ã§ã„ã„ã€‚\u003c/p\u003e\n\u003ch3\u003eã‚¿ã‚¹ã‚¯è¿½åŠ \u003c/h3\u003e\n\u003cp\u003eä¸€ç•ªä¸Šã®éšå±¤ã«ã‚¿ã‚¹ã‚¯ã‚’è¶³ã™å ´åˆ\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-sql\"\u003e\u003cspan class=\"hljs-keyword\"\u003eINSERT\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eINTO\u003c/span\u003e tasks (`name`)\n\t\t\u003cspan class=\"hljs-keyword\"\u003eVALUES\u003c/span\u003e(\"æ•£æ­©\");\n\u003cspan class=\"hljs-keyword\"\u003eINSERT\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eINTO\u003c/span\u003e task_hierarchie\n\t\t\u003cspan class=\"hljs-keyword\"\u003eVALUES\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e);\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eå­ã‚¿ã‚¹ã‚¯ã®è¿½åŠ ã€‚å­ã‚¿ã‚¹ã‚¯è‡ªèº«ã®idã¨ã€å­ã‚’è¶³ã™å¯¾è±¡ã®è¦ªå…¨ã¦ã«å­ã®idã‚’è¶³ã™ã€‚ä¾‹ãˆã°ã€æƒé™¤/é¢¨å‘‚(id=5)ã®å­ã«æ’æ°´æºã‚’è¶³ã™å ´åˆã€è¦ªã§ã‚ã‚‹ã€æƒé™¤(id=4)ã¨é¢¨å‘‚(id=5)ãã‚Œãã‚Œã«æ’æ°´æºã®idã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’è¿½åŠ ã™ã‚‹ã€‚ã¾ãŸ\u003c/p\u003e\n\u003cp\u003eå¯¾è±¡ã®ã™ã¹ã¦ã®è¦ªã‚’æ¢ã™ã¨ãã€\u003ccode\u003etask_hierarchie\u003c/code\u003eã®\u003ccode\u003echild_id\u003c/code\u003eãŒå¯¾è±¡idã¨ä¸€è‡´ã®æ¡ä»¶ã§æ¤œç´¢ã™ã‚Œã°ã‚ˆã„ã€‚\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-sql\"\u003e\u003cspan class=\"hljs-keyword\"\u003eINSERT\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eINTO\u003c/span\u003e tasks (`name`)\n\t\t\u003cspan class=\"hljs-keyword\"\u003eVALUES\u003c/span\u003e(\"æ’æ°´æº\"); \u003cspan class=\"hljs-comment\"\u003e-- id=10\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003eINSERT\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eINTO\u003c/span\u003e task_hierarchie\n\u003cspan class=\"hljs-keyword\"\u003eSELECT\u003c/span\u003e\n\th.parent_id,\n\t\u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eFROM\u003c/span\u003e\n\ttask_hierarchie \u003cspan class=\"hljs-keyword\"\u003eAS\u003c/span\u003e h\n\u003cspan class=\"hljs-keyword\"\u003eWHERE\u003c/span\u003e\n\th.child_id \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eUNION\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eALL\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eSELECT\u003c/span\u003e\n\t\u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e,\n\t\u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e;\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003eã‚¿ã‚¹ã‚¯å‰Šé™¤\u003c/h3\u003e\n\u003cp\u003eæƒé™¤ã‚¿ã‚¹ã‚¯(id=4)ã‚’å‰Šé™¤ã™ã‚‹å ´åˆ\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-sql\"\u003e\u003cspan class=\"hljs-keyword\"\u003eDELETE\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eFROM\u003c/span\u003e tasks3\n\u003cspan class=\"hljs-keyword\"\u003eWHERE\u003c/span\u003e id \u003cspan class=\"hljs-keyword\"\u003eIN\u003c/span\u003e(\n\t\t\u003cspan class=\"hljs-keyword\"\u003eSELECT\u003c/span\u003e\n\t\t\tchild_id \u003cspan class=\"hljs-keyword\"\u003eFROM\u003c/span\u003e task_hierarchie\n\t\t\u003cspan class=\"hljs-keyword\"\u003eWHERE\u003c/span\u003e\n\t\t\tparent_id \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e);\n\n\u003cspan class=\"hljs-keyword\"\u003eDELETE\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eFROM\u003c/span\u003e task_hierarchie\n\u003cspan class=\"hljs-keyword\"\u003eWHERE\u003c/span\u003e parent_id \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e;\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eå…¥ã‚Œå­é›†åˆ\u003c/h2\u003e\n\u003cp\u003eå¾Œã§æ›¸ãã¾ã™ã€‚\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://mickindex.sakura.ne.jp/database/db_tree_ns.html\"\u003eSQLã§æœ¨ã¨éšå±¤æ§‹é€ ã®ãƒ‡ãƒ¼ã‚¿ã‚’æ‰±ã†ï¼ˆï¼‘ï¼‰â€•â€• å…¥ã‚Œå­é›†åˆãƒ¢ãƒ‡ãƒ«\u003c/a\u003e\u003c/p\u003e\n\u003ch2\u003eã¾ã¨ã‚\u003c/h2\u003e\n\u003cp\u003eéš£æ¥ãƒªã‚¹ãƒˆã¯ã€éšå±¤ä¸Šé™ãŒã‚ã‚‹ã€ã‹ã¤æ·±ããªã‚‰ãªã„å ´åˆã«ãŠã„ã¦åˆ©ç”¨ã§ãã‚‹ã€‚ãŒã€ã—ã‹ã—ä¸Šé™ã‚’æ·±ãã—ãŸããªã£ãŸã¨ãã«ã‚­ãƒ„ã‚¤ã€‚\u003c/p\u003e\n\u003cp\u003eçµŒè·¯åˆ—æŒ™ã¯çµŒè·¯ãŒæ–‡å­—åˆ—ã§ã€æ­£ã—ããªã„ãƒ‘ã‚¹ãŒinsertã•ã‚Œã¦ã—ã¾ã†å¯èƒ½æ€§ã‚’è€ƒãˆã‚‹ã¨ã‚­ãƒ„ã‚¤ã€‚ã¾ãŸã€auto_incrementã®ã¨ãä¸€åº¦insertã—ã¦idã‚’ç¢ºèªã—ã¦updateã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã®ã‚‚é¢å€’ã€‚\u003c/p\u003e\n\u003cp\u003eé–‰åŒ…ãƒ†ãƒ¼ãƒ–ãƒ«ã¯ãƒ‡ãƒ¼ã‚¿é‡ãŒå¤šããªã£ã¦ã—ã¾ã„ãŒã¡ã ãŒã€æ‰‹é–“ãªãå„ç¨®æ“ä½œãŒã§ãã‚‹ã®ã§æœ‰ç”¨ã«æ„Ÿã˜ãŸã€‚\u003c/p\u003e\n\u003cp\u003eå€‹äººçš„ã«ä½œæˆã—ã¦ã„ã‚‹ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§éšå±¤æ§‹é€ ã‚’è€ƒãˆã‚‹å¿…è¦ãŒã‚ã‚Šã€èª¿ã¹ã¦ã¿ãŸã€‚è¦ä»¶ã¨ã—ã¦ä¸Šé™ãŒæ±ºã¾ã£ã¦ã„ã‚‹ã€ã‹ã¤æµ…ã„ã®ã§éš£æ¥ãƒªã‚¹ãƒˆã‹é–‰åŒ…ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’åˆ©ç”¨ã™ã‚‹ã®ãŒå¦¥å½“ã¨åˆ¤æ–­ã€‚ä½¿ã„å‹æ‰‹ã¨ä»Šå¾Œä¸Šé™ã‚’ãªãã—ã¦ã‚‚å•é¡Œãªã„ã“ã¨ã‹ã‚‰ã€æœ€çµ‚çš„ã«ã¯é–‰åŒ…ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’é¸æŠã—ãŸã€‚\u003c/p\u003e\n","ogp":{"title":"RDBã§éšå±¤æ§‹é€ ã‚’ã‚ã¤ã‹ã†","description":"ä¾‹ãˆã°TODOã‚¢ãƒ—ãƒªã«ãŠã„ã¦ã€è¦ªã‚¿ã‚¹ã‚¯ã€å­ã‚¿ã‚¹ã‚¯ã€å­«ã‚¿ã‚¹ã‚¯...ã®ã‚ˆã†ã«ã‚¿ã‚¹ã‚¯ã‚’ä½œæˆã§ãã‚‹æ©Ÿèƒ½ãŒã‚ã£ãŸã¨ã—ã¦ã€ãã®é–¢ä¿‚æ€§ã‚’ã©ã†DBã«ä¿å­˜ã™ã‚‹ã®ã‹ã€ã‚ã‹ã‚‰ãªã‹ã£ãŸã®ã§èª¿ã¹ãŸã€‚"}},"__N_SSG":true},"page":"/articles/[id]","query":{"id":"2021-03-21-db-tree"},"buildId":"tvOLysmWlxWIZL6iVcRA2","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-11c8eba6a84e3fddec04.js"></script><script src="/_next/static/chunks/main-1aebe1c5ebad78b6eefd.js" async=""></script><script src="/_next/static/chunks/webpack-e067438c4cf4ef2ef178.js" async=""></script><script src="/_next/static/chunks/framework.2113c6061a2f456066a1.js" async=""></script><script src="/_next/static/chunks/commons.040a3874e38b7cc6b430.js" async=""></script><script src="/_next/static/chunks/pages/_app-5874fa266a7d44909009.js" async=""></script><script src="/_next/static/chunks/c5b568cee8545d966ddc8d89f9063461e084494a.bb32f9c4396722e794d4.js" async=""></script><script src="/_next/static/chunks/pages/articles/%5Bid%5D-16081245fdd7df34b03c.js" async=""></script><script src="/_next/static/tvOLysmWlxWIZL6iVcRA2/_buildManifest.js" async=""></script><script src="/_next/static/tvOLysmWlxWIZL6iVcRA2/_ssgManifest.js" async=""></script></body></html>